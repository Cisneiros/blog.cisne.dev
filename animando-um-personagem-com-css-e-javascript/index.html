<!DOCTYPE html><html lang="pt-BR" class=" "><head><meta name="generator" content="React Static"/><title data-react-helmet="true">Animando um personagem com CSS e JavaScript · Cisne.dev blog</title><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="Cisneiros"/><meta data-react-helmet="true" property="og:title" content="Animando um personagem com CSS e JavaScript · Cisne.dev blog"/><meta data-react-helmet="true" property="og:image" content="https://blog.cisne.dev/animando-um-personagem-com-css-e-javascript/social-image.png"/><meta data-react-helmet="true" name="twitter:title" content="Animando um personagem com CSS e JavaScript · Cisne.dev blog"/><meta data-react-helmet="true" name="twitter:image" content="https://blog.cisne.dev/animando-um-personagem-com-css-e-javascript/social-image.png"/><link rel="preload" as="script" href="/templates/vendors~__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.207edc50.js"/><link rel="preload" as="script" href="/templates/__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.a04ea84b.js"/><link rel="preload" as="script" href="/templates/__react_static_root__/src/containers/post.d8dd52db.js"/><link rel="preload" as="script" href="/templates/vendors~main.272ae1d1.js"/><link rel="preload" as="script" href="/main.f19d4c14.js"/><link data-react-helmet="true" rel="stylesheet" href="//unpkg.com/dracula-prism/dist/css/dracula-prism.min.css"/><style data-styled="" data-styled-version="5.1.1">.CfxHf{max-width:960px;margin:0 auto;position:relative;}/*!sc*/
data-styled.g1[id="ui__Fit-prwz6b-0"]{content:"CfxHf,"}/*!sc*/
.iuDFSN{padding:1rem;color:var(--color-mid);text-align:center;font-size:1.5rem;}/*!sc*/
.iuDFSN a,.iuDFSN a:hover{-webkit-text-decoration:none;text-decoration:none;color:inherit;}/*!sc*/
data-styled.g2[id="Navigation__Container-sc-1yk0pqp-0"]{content:"iuDFSN,"}/*!sc*/
.izuwCZ{max-width:960px;margin:0 auto;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g3[id="Navigation__NavFit-sc-1yk0pqp-1"]{content:"izuwCZ,"}/*!sc*/
.TctaC{width:2.5rem;height:1.2em;overflow:hidden;--default-rotation:-180deg;}/*!sc*/
@media (prefers-color-scheme:dark){.TctaC{--default-rotation:0;}}/*!sc*/
data-styled.g4[id="Navigation__BrightnessContainer-sc-1yk0pqp-2"]{content:"TctaC,"}/*!sc*/
.sLeDt{-webkit-transform:rotate(var(--default-rotation));-ms-transform:rotate(var(--default-rotation));transform:rotate(var(--default-rotation));-webkit-transition:-webkit-transform 0.3s ease-out;-webkit-transition:transform 0.3s ease-out;transition:transform 0.3s ease-out;}/*!sc*/
html.light .sLeDt{-webkit-transform:rotate(-180deg);-ms-transform:rotate(-180deg);transform:rotate(-180deg);}/*!sc*/
html.dark .sLeDt{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}/*!sc*/
data-styled.g5[id="Navigation__BrightnessSpinner-sc-1yk0pqp-3"]{content:"sLeDt,"}/*!sc*/
.frsARl{background:none;border:none;cursor:pointer;}/*!sc*/
.frsARl:last-child{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}/*!sc*/
data-styled.g7[id="Navigation__BrightnessIcon-sc-1yk0pqp-5"]{content:"frsARl,"}/*!sc*/
.gdHjSq{margin-top:3rem;padding:1rem;background:var(--color-foreground);color:var(--color-background);}/*!sc*/
.gdHjSq a{color:var(--text-inverse-color-1);}/*!sc*/
.gdHjSq a:hover{color:var(--text-inverse-color-3);}/*!sc*/
data-styled.g8[id="Footer__Container-b3q04c-0"]{content:"gdHjSq,"}/*!sc*/
.layJcq{max-width:960px;margin:0 auto;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g9[id="Footer__FooterFit-b3q04c-1"]{content:"layJcq,"}/*!sc*/
*{box-sizing:border-box;margin:0;padding:0;border:0;font-size:inherit;font-weight:inherit;font-style:inherit;}/*!sc*/
:root{--color-1:#12c2e9;--color-2:#c471ed;--color-3:#f64f59;--color-1-darker:#0A7B94;--color-2-darker:#AE3CE7;--color-3-darker:#E90C1B;--color-light:#fefefe;--color-dark:#030303;--color-mid-dark:#747481;--color-mid-light:#818181;--font-weight-light:300;--font-weight-regular:400;--font-weight-heavy:500;--font-family-light:"HelveticaNeue-Light","Helvetica Neue Light",'Helvetica Neue',sans-serif;--font-family:'Helvetica Neue',sans-serif;}/*!sc*/
strong,h1,h2,h3,h4,h5,h6{font-family:var(--font-family);}/*!sc*/
html{font-family:var(--font-family-light);font-size:20px;line-height:1;color:var(--color-foreground);background-color:var(--color-background);text-rendering:optimizeLegibility;}/*!sc*/
@media (max-width:600px){html{font-size:16px;}}/*!sc*/
html,html.light{--color-background:var(--color-light);--color-foreground:var(--color-dark);--color-mid:var(--color-mid-dark);--text-color-1:var(--color-1-darker);--text-color-2:var(--color-2-darker);--text-color-3:var(--color-3-darker);--text-inverse-color-1:var(--color-1);--text-inverse-color-2:var(--color-2);--text-inverse-color-3:var(--color-3);}/*!sc*/
html.dark{--color-background:var(--color-dark);--color-foreground:var(--color-light);--color-mid:var(--color-mid-light);--text-color-1:var(--color-1);--text-color-2:var(--color-2);--text-color-3:var(--color-3);--text-inverse-color-1:var(--color-1-darker);--text-inverse-color-2:var(--color-2-darker);--text-inverse-color-3:var(--color-3-darker);}/*!sc*/
@media (prefers-color-scheme:dark){html{--color-background:var(--color-dark);--color-foreground:var(--color-light);--color-mid:var(--color-mid-light);}}/*!sc*/
body{font-size:1em;font-weight:var(--font-weight-light);}/*!sc*/
strong{font-weight:var(--font-weight-heavy);}/*!sc*/
em{font-style:italic;}/*!sc*/
main{padding:1rem;}/*!sc*/
hr{width:30%;margin:4rem auto;border:none;border-bottom:dotted 1px var(--color-1);}/*!sc*/
.pagination{text-align:center;}/*!sc*/
.pagination a{color:var(--text-color-1);}/*!sc*/
.pagination a:hover{color:var(--text-color-3);}/*!sc*/
a{color:var(--text-color-1);-webkit-text-decoration-color:#c471ed80;text-decoration-color:#c471ed80;-webkit-text-decoration-style:wavy;text-decoration-style:wavy;}/*!sc*/
a:hover{color:var(--text-color-3);-webkit-text-decoration-color:#12c2e980;text-decoration-color:#12c2e980;}/*!sc*/
.phone-mockup{max-width:15rem;margin:0 auto 1rem;position:relative;}/*!sc*/
.phone-mockup::before{content:'';width:100%;height:100%;position:absolute;pointer-events:none;background:url(/iphone-11-pro.png) no-repeat;background-size:contain;}/*!sc*/
.phone-mockup video,.phone-mockup img{width:100%;padding:9.3%;}/*!sc*/
data-styled.g14[id="sc-global-hFBrmQ1"]{content:"sc-global-hFBrmQ1,"}/*!sc*/
.jLFdFk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
.jLFdFk .sources{width:100%;min-width:0;}/*!sc*/
.jLFdFk .result{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:30%;margin-left:2rem;}/*!sc*/
.jLFdFk.result-first{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}/*!sc*/
.jLFdFk.result-first .result{-webkit-order:0;-ms-flex-order:0;order:0;margin:0 0 1rem;max-width:initial;}/*!sc*/
.jLFdFk.result-first .sources{-webkit-order:1;-ms-flex-order:1;order:1;}/*!sc*/
@media (max-width:600px){.jLFdFk{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.jLFdFk .result{max-width:initial;margin-left:0;margin-top:1rem;}}/*!sc*/
data-styled.g16[id="MarkdownRendererstyles__LiveCodeContainer-i4h55e-1"]{content:"jLFdFk,"}/*!sc*/
.iuAsfI #login-form{--size:300px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10%;width:var(--size);min-height:var(--size);border-radius:10%;background-color:#d9d1d1;}/*!sc*/
.iuAsfI #login-form input{padding:0.25em;border-radius:0.5em;}/*!sc*/
.iuAsfI .character{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:calc(var(--size) / 3);height:calc(var(--size) / 3);border-radius:40% 40% 0 0;background-color:#d95151;}/*!sc*/
.iuAsfI .character .eyes{--eye-ball-offset:50%;--eye-ball-size:35%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:80%;}/*!sc*/
.iuAsfI .character .eyes .eye{position:relative;-webkit-transition:height 0.2s ease-in;transition:height 0.2s ease-in;overflow:hidden;width:35%;border-radius:50%;background-color:#190000;}/*!sc*/
.iuAsfI .character .eyes .eye::before{content:'';display:block;-webkit-transition:padding-top 0.2s ease-in;transition:padding-top 0.2s ease-in;padding-top:100%;}/*!sc*/
.iuAsfI .character .eyes.closed .eye::before{padding-top:2px;}/*!sc*/
.iuAsfI .character .eyes .eye::after{content:'';position:absolute;bottom:5%;left:var(--eye-ball-offset);-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:all 0.2s ease-in;transition:all 0.2s ease-in;width:var(--eye-ball-size);height:var(--eye-ball-size);border-radius:50%;background-color:#faffff;}/*!sc*/
.iuAsfI .character .eyes.closed .eye::after{height:0;}/*!sc*/
data-styled.g22[id="MarkdownRenderer___StyledHtmlContainer-sc-185v3us-0"]{content:"iuAsfI,"}/*!sc*/
.tuaWG{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
@media (max-width:600px){.tuaWG{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}/*!sc*/
data-styled.g23[id="Poststyles__AfterPost-sc-12qb97v-0"]{content:"tuaWG,"}/*!sc*/
.gkeqUt{-webkit-flex:1;-ms-flex:1;flex:1;}/*!sc*/
@media (max-width:600px){.gkeqUt{text-align:center;margin-bottom:1rem;}}/*!sc*/
data-styled.g24[id="Poststyles__AfterPostChild-sc-12qb97v-1"]{content:"gkeqUt,"}/*!sc*/
.fAvgXR{-webkit-flex:1;-ms-flex:1;flex:1;text-align:right;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}/*!sc*/
@media (max-width:600px){.fAvgXR{text-align:center;margin-bottom:1rem;}}/*!sc*/
data-styled.g25[id="Poststyles__Tags-sc-12qb97v-2"]{content:"fAvgXR,"}/*!sc*/
.kSZCZX::before{content:' #';color:var(--color-mid);}/*!sc*/
data-styled.g26[id="Poststyles__Tag-sc-12qb97v-3"]{content:"kSZCZX,"}/*!sc*/
.kyWzPB{-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto;}/*!sc*/
data-styled.g27[id="Poststyles__Container-sc-12qb97v-4"]{content:"kyWzPB,"}/*!sc*/
.hhBwVH{font-size:5rem;font-weight:var(--font-weight-regular);line-height:0.8;background:linear-gradient(var(--color-1),var(--color-2),var(--color-3));-webkit-text-fill-color:transparent;background-clip:text;-webkit-background-clip:text;padding-bottom:1rem;margin:1rem 0;}/*!sc*/
html.rainbow .hhBwVH{background-image:linear-gradient(124deg,#ff2400,#e81d1d,#e8b71d,#e3e81d,#1de840,#1ddde8,#2b1de8,#dd00f3,#dd00f3);-webkit-animation:hTUzwZ 9s ease infinite;animation:hTUzwZ 9s ease infinite;background-size:450% 450%;}/*!sc*/
@media (max-width:600px){.hhBwVH{font-size:3.5rem;}}/*!sc*/
.hhBwVH a{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g28[id="Poststyles__Title-sc-12qb97v-5"]{content:"hhBwVH,"}/*!sc*/
.fonWHZ{color:var(--color-mid);text-align:center;margin-bottom:2rem;}/*!sc*/
data-styled.g29[id="Poststyles__Meta-sc-12qb97v-6"]{content:"fonWHZ,"}/*!sc*/
.jhgzPU{line-height:1.6;}/*!sc*/
.jhgzPU h2{font-size:2.5rem;}/*!sc*/
.jhgzPU h3{font-size:2rem;}/*!sc*/
.jhgzPU h4{font-size:1.5rem;}/*!sc*/
.jhgzPU h2,.jhgzPU h3,.jhgzPU h4,.jhgzPU h5,.jhgzPU h6{-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto;font-weight:var(--font-weight-regular);line-height:0.8;padding-bottom:1rem;margin-top:2rem;}/*!sc*/
.jhgzPU img{max-width:100%;}/*!sc*/
.jhgzPU pre.refractor{margin-top:0;margin-left:0;padding-left:1rem;border-left:solid 0.25rem var(--color-1);border-radius:0;font-size:0.8rem;overflow-wrap:normal;overflow-x:auto;background-color:var(--color-dark);color:var(--color-light);padding-top:0.5rem;padding-bottom:0.5rem;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}/*!sc*/
.jhgzPU pre.refractor::-webkit-scrollbar{width:0.25rem;height:0.25rem;}/*!sc*/
.jhgzPU pre.refractor code,.jhgzPU code{font-family:'Fira Code','Menlo',monospace;}/*!sc*/
.jhgzPU p code{color:var(--text-color-3);}/*!sc*/
.jhgzPU p code,.jhgzPU h1 code,.jhgzPU h2 code,.jhgzPU h3 code,.jhgzPU h4 code,.jhgzPU h5 code,.jhgzPU h6 code{font-size:0.9em;}/*!sc*/
.jhgzPU p,.jhgzPU pre,.jhgzPU ul,.jhgzPU ol,.jhgzPU table,.jhgzPU blockquote,.jhgzPU .live-code-container{margin-bottom:1rem;}/*!sc*/
.jhgzPU twitter-widget{margin-bottom:1rem !important;}/*!sc*/
.jhgzPU p:last-child,.jhgzPU pre:last-child,.jhgzPU ul:last-child,.jhgzPU ol:last-child,.jhgzPU table:last-child,.jhgzPU blockquote:last-child,.jhgzPU .live-code-container:last-child{margin-bottom:0;}/*!sc*/
.jhgzPU ul,.jhgzPU ol{list-style:none;margin-left:1rem;counter-reset:li;}/*!sc*/
.jhgzPU li{counter-increment:li;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
.jhgzPU ul li::before{content:'•';margin-right:0.5rem;color:var(--color-2);}/*!sc*/
.jhgzPU ol li::before{content:"."counter(li);margin-right:0.5rem;color:var(--color-2);font-weight:var(--font-weight-regular);width:1em;display:inline-block;margin-left:-0.5em;margin-right:0.5em;text-align:right;direction:rtl;}/*!sc*/
.jhgzPU table{margin-left:auto;margin-right:auto;border-spacing:0;font-size:0.9em;}/*!sc*/
.jhgzPU td,.jhgzPU th{border-bottom:solid 1px var(--color-2);padding:0.5rem;}/*!sc*/
.jhgzPU th{font-weight:var(--font-weight-heavy);}/*!sc*/
.jhgzPU tr:hover{background:var(--color-2);}/*!sc*/
.jhgzPU tr:last-of-type td{border-bottom:0;}/*!sc*/
.jhgzPU blockquote{padding-left:1rem;border-left:solid 0.25rem var(--color-3);color:var(--color-mid);}/*!sc*/
data-styled.g30[id="Poststyles__Content-sc-12qb97v-7"]{content:"jhgzPU,"}/*!sc*/
.jjKdZc{position:fixed;top:0;left:0;right:0;height:0.25rem;background-color:var(--color-1);-webkit-transition:opacity 0.25s ease-out;transition:opacity 0.25s ease-out;z-index:2;}/*!sc*/
data-styled.g31[id="post__ScrollTrackerContainer-gh0jqu-0"]{content:"jjKdZc,"}/*!sc*/
@-webkit-keyframes hTUzwZ{0%{background-position:0% 82%;}50%{background-position:100% 19%;}100%{background-position:0% 82%;}}/*!sc*/
@keyframes hTUzwZ{0%{background-position:0% 82%;}50%{background-position:100% 19%;}100%{background-position:0% 82%;}}/*!sc*/
data-styled.g32[id="sc-keyframes-hTUzwZ"]{content:"hTUzwZ,"}/*!sc*/
</style><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml"/></head><body><div id="root"><nav class="Navigation__Container-sc-1yk0pqp-0 iuDFSN"><div class="ui__Fit-prwz6b-0 Navigation__NavFit-sc-1yk0pqp-1 izuwCZ"><p class="logo"><a href="/">Cisne.dev blog</a></p><div class="Navigation__BrightnessContainer-sc-1yk0pqp-2 TctaC"><div class="Navigation__BrightnessSpinner-sc-1yk0pqp-3 sLeDt"><button title="Mudar para modo diurno" aria-label="Mudar para modo diurno" class="Navigation__ClearButton-sc-1yk0pqp-4 Navigation__BrightnessIcon-sc-1yk0pqp-5 frsARl">🌙</button><button title="Mudar para modo noturno" aria-label="Mudar para modo noturno" class="Navigation__ClearButton-sc-1yk0pqp-4 Navigation__BrightnessIcon-sc-1yk0pqp-5 frsARl">☀️</button></div></div></div></nav><main><div class="ui__Fit-prwz6b-0 CfxHf"><div><div style="width:0%;opacity:0" class="post__ScrollTrackerContainer-gh0jqu-0 jjKdZc"></div><article class="Poststyles__Container-sc-12qb97v-4 kyWzPB"><h1 class="Poststyles__Title-sc-12qb97v-5 hhBwVH"><a href="/animando-um-personagem-com-css-e-javascript/">Animando um personagem com CSS e JavaScript</a></h1><p class="Poststyles__Meta-sc-12qb97v-6 fonWHZ">Publicado em <!-- -->10 jul 2020<!-- -->. Uns <!-- -->10<!-- --> minutos de leitura.</p><div class="Poststyles__Content-sc-12qb97v-7 jhgzPU content"><p>CSS é uma parada poderosa. Apesar de, originalmente, servir para suportar o HTML e definir estilos para itens em um documento, a comunidade de desenvolvimento front-end mostrou que dá para fazer muito mais que isso e cria verdadeiras experiências com CSS, substituindo ferramentas de animação e imagens por linhas de código de folha de estilos. Juntando isso com o dinamismo de JavaScript, dá para criar interações bem legais diretamente na web, muitas vezes sem assets extra além do próprio código.</p><p>Esse post é um experimento para criar algo que não é novo, mas que é divertido e mostra algumas das capacidades de criar animações interativas com CSS e JS. Minha ideia é tentar fazer uma animação para acompanhar um formulário de login sem usar imagens ou outros recursos além de HTML, CSS e JS. <strong>Eu não sou um artista então não espere uma obra de arte.</strong> A ideia é, com pouco código, fazer um efeito que fique legal.</p><span><!-- summary-break --></span><h2>Como ficou</h2><p>Interaja com os campos de nome de usuário e senha abaixo para animar o personagem.</p><div class="MarkdownRendererstyles__LiveCodeContainer-i4h55e-1 jLFdFk live-code-container result-first"><div class="sources"><h2>O código</h2><p>Esse é o código final. Logo abaixo, vou comentar cada trecho de código, ressaltar os pontos mais interessantes e explicar algumas partes que não são tão claras de cara.</p><pre class="refractor language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>login-form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>character<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>eyes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>eye<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>eye<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre><pre class="refractor language-css"><code class="language-css"><span class="token selector">#login-form</span> <span class="token punctuation">{</span>
  <span class="token property">--size</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">min-height</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 10%<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #d9d1d1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#login-form input</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0.25em<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.5em<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.character</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--size<span class="token punctuation">)</span> / 3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--size<span class="token punctuation">)</span> / 3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 40% 40% 0 0<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #d95151<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.character .eyes</span> <span class="token punctuation">{</span>
  <span class="token property">--eye-ball-offset</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">--eye-ball-size</span><span class="token punctuation">:</span> 35%<span class="token punctuation">;</span>

  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-evenly<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 80%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.character .eyes .eye</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> height 0.2s ease-in<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 35%<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #190000<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.character .eyes .eye::before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> padding-top 0.2s ease-in<span class="token punctuation">;</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.character .eyes.closed .eye::before</span> <span class="token punctuation">{</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.character .eyes .eye::after</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 5%<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--eye-ball-offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.2s ease-in<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--eye-ball-size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--eye-ball-size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #faffff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.character .eyes.closed .eye::after</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="refractor language-js"><code class="language-js"><span class="token keyword">const</span> loginForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;#login-form&#x27;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> characterEyes <span class="token operator">=</span> loginForm<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;.eyes&#x27;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> usernameInput <span class="token operator">=</span> loginForm<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;.username&#x27;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> passwordInput <span class="token operator">=</span> loginForm<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;.password&#x27;</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">updateEyeballPosition</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">!==</span> <span class="token string">&#x27;number&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> offset <span class="token operator">=</span> usernameInput<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">/</span> usernameInput<span class="token punctuation">.</span>maxLength<span class="token punctuation">)</span>
    value <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>offset<span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  characterEyes<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;--eye-ball-offset&#x27;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

usernameInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;keyup&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">updateEyeballPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
usernameInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;focus&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">updateEyeballPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
usernameInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;blur&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">updateEyeballPosition</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

passwordInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;focus&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> characterEyes<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#x27;closed&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
passwordInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;blur&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> characterEyes<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&#x27;closed&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div><div class="MarkdownRendererstyles__HtmlContainer-i4h55e-0 MarkdownRenderer___StyledHtmlContainer-sc-185v3us-0 iuAsfI result"><div><div id="login-form">
  <div class="character">
    <div class="eyes">
      <div class="eye"></div>
      <div class="eye"></div>
    </div>
  </div>
  <input class="username" type="text" placeholder="username" maxlength="20">
  <input class="password" type="password" placeholder="password">
</div></div></div></div><h2>Destrinchando o CSS</h2><p>O HTML é razoavelmente auto-explicativo: temos um um personagem e dois campos de texto, um deles para senha. Dentro do personagem, temos <code>div</code>s de estrutura com elementos necessários pra construir o desenho e a animação. Eu normalmente crio um elemento raíz e saio criando mais elementos quando vejo que vão ser necessários, como nesse caso foram os olhos (um container em volta deles e um <code>div</code> pra cada olho). As pupilas eu deixei para criar pseudoelementos com CSS.</p><p>O grosso do código está no CSS. Eu tentei definir medidas relativas dentro do personagem sempre que possível, para que escalá-lo fosse mais fácil. Deixei como asboluto apenas o tamanho dele (300px).</p><p>No personagem, eu usei bastante <strong>flexbox</strong>. É um tipo de layout (<code>display: flex</code>) que permite que o elemento defina como os elementos diretamente descendentes vão se posicionar. No caso do elemento raíz do personagem, a direção dos elementos é na vertical (<code>flex-direction: column</code>). Eu tinha planos para por uma boca no início, mas terminei deixando sem. De toda maneira, colocar na vertical permite centralizar os olhos usando espaçamento em volta do (único) descendente (<code>justify-content: space-around</code>).</p><p>Dentro do elementos que contém os olhos do personagem (<code>.eyes</code>), vamos ter dois elementos, um para cada olho (<code>.eye</code>). Eles também estão alinhados dentro usando flex, mas dessa vez a direção é na horizontal (<code>row</code>). Como é o padrão, não precisa especificar.</p><p>Agora vem um dos <em>pulos do gato</em>: os olhos. Eu queria fazer os olhos serem retangulares (redondos na verdade, mas para chegar no círculo começamos em um quadrado). Porém, não queria definir valores absolutos para a largura e altura de cada olho. Ao invés disso, queria definir uma largura proporcional a largura do personagem e que a altura do olho fosse igual a largura dele. <strong>Só que não é tão fácil.</strong></p><p>Quando a gente diz que um elemento tem <code>width: 50%</code>, a gente quer dizer que ele tem metade da <strong>largura</strong> (<code>width</code>) do parente. Quando a gente diz que ele tem <code>height: 50%</code>, ele vai ter metade da <strong>altura</strong> (<code>height</code>) do parente. A linha dos olhos não tem uma altura definida, então um percentual sobre a altura iria resultar em <strong>zero</strong>, se não tiver nenhum outro elemento dentro que defina uma altura.</p><p>A solução pro meu problema era em teoria, simples: eu queria poder especificar a <strong>altura</strong> do olho em função da <strong>largura</strong> do parente, igual como fiz com a própria largura do olho. Mas não consigo fazer isso diretamente. Ora, se a largura do olho já está em função da largura do parente, se eu conseguir fazer a <strong>altura do olho em função da largura do olho</strong>, dá pra resolver o problema!</p><p>Você, querida pessoa que está lendo este post, sabe como é calculado um <code>padding</code> relativo (percentual)? Se você respondeu &quot;em função da largura do parente&quot;, você acertou! Um <code>padding-top</code> de 50%, por exemplo, vai adicionar um espaçamento interno no topo do elemento do tamanho de <strong>metade da largura do parente</strong>. Isso me ajuda! Dá para criar um elemento <strong>dentro do olho</strong> e colocar o <code>padding-top</code> dele como 100%. Assim, eu vou ter um elemento filho do olho, sem conteúdo mas com padding, que vai resultar numa altura igual a 100% da largura do olho.</p><p>Parece complicado? <strong>É porque é mesmo.</strong> Isso seria facilmente resolvido se CSS tivesse uma propriedade como <code>aspect-ratio: 1:1</code> por exemplo. Mas enfim, isso funciona. Se você procurar no HTML, não vai encontrar um elemento dentro de <code>.eye</code>. Neste caso, eu usei um <strong>pseudoelemento</strong> via CSS, o <code>::before</code>. Ele representa um elemento dentro do olho, que vem antes do conteúdo filho do olho (que não existe, nesse caso). Para um pseudoelemento existir, ele precisa ter um valor no <code>content</code>, nem que seja a string vazia (<code>&#x27;&#x27;</code>).</p><p>Para o efeito de fechar o olho, vamos animar o <code>padding</code> do pseudoelemento também. Por isso, já deixei pronto um <code>transition</code>. Quando os olhos estiverem fechados, vamos adicionar a classe <code>.closed</code> no container dos olhos (para não ter que adicionar uma vez em cada olho). Assim, quando os olhos estiverem dentro de um <code>.eyes.closed</code>, seus pseudoelementos <code>::before</code> vão ter o padding fixo em <code>2px</code>. Resolvi usar um valor absoluto neste padding, para deixar o olho quase sumindo não importa o tamanho do personagem.</p><p>Enfim, vem outra parte um pouco mais complicada que é <strong>animar a pupila</strong>. Para criar a pupila, eu usei outro pseudoelemento, o <code>::after</code>. Ele tem a mesma lógica do primeiro, mas vem depois do conteúdo do olho (que não existe), e depois do <code>::before</code> por consequência. Para animar sua posição, resolvi deixá-lo com <code>position: absolute</code>. Para que a posição seja em relação ao olho que contem a pupila, o olho tem <code>position: relative</code>.</p><p>Querendo facilitar minha vida, para não ter que levar em conta o tamanho da pupila na hora de animar sua posição, usei o <code>transform: translateX(-50%)</code> para deslocar a pupila para a esquerda em metade da sua largura. Isso não afeta a posição do elemento, apenas onde ele vai ser desenhado. Com isso, a posição <code>left</code> do elemento aponta para o centro da pupila, e não mais para o canto. Um <code>left</code> de 0% deixa a pupila metade dentro, metade fora do lado esquerdo do olho, e um <code>left</code> de 100% faz o mesmo só que na direita do olho. Para a pupila não aparecer fora do olho, ele tem <code>overflow: hidden</code>.</p><p>Como a pupila vai ser animada tanto no <code>left</code>, como no <code>height</code> (para ela fechar junto com o olho), coloquei <code>transition: all</code> para facilitar minha vida, mas poderia ter escrito para as duas propriedades.</p><h2>Destrinchando o JavaScript</h2><p>Para esse exemplo, usamos apenas JavaScript nativo do navegador, sem dependências ou bibliotecas, manipulando elementos do DOM diretamente. Refazer essa lógica com um Virtual DOM, como o do React, deixaria o código mais funcional (podendo criar um componente personagem sem estado), e quem sabe eu refaça uma versão desse exemplo com React.</p><p>Temos dois comportamentos que queremos controlar: o movimento da pupila conforme o usuário digita e o abrir/fechar dos olhos quando o campo de senha é utilizado.</p><p>Começando pelos abrir e fechar dos olhos, que é mais simples: quando o <code>input</code> de senha recebe o foco (ou seja, é selecionado para digitação, e recebe o evento de <code>focus</code>), adicionamos a classe <code>.closed</code> no container dos olhos (<code>.eyes</code>). Isso vai mudar o <code>padding-top</code> do pseudoelemento <code>::before</code> de cada olho para 2px, que vai ser animado por conta da <code>transition</code>. Quando o usuário sair desse campo e ele perder o foco (o evento de <code>blur</code>), nós retiramos a classe. Simples assim.</p><p>Agora, para movimentar as pupilas. Eu criei uma função que troca o <code>left</code> das pupilas através de uma <strong>variável de CSS</strong>, a <code>--eye-ball-offset</code>. Eu não precisava usar uma variável de CSS para isso, mas facilita para mudar o posicionamento nos dois olhos ao mesmo tempo. Mudar a variável em um elemento altera o valor para todos os descendentes deste elemento, por isso coloquei a variável no container dos olhos (<code>.eyes</code>).</p><p>Essa função, se receber um parâmetro e ele for um número, vai interpretá-lo como um número percentual (0-100) e trocar o valor da variável por esse valor (com um <code>%</code> no fim). Essa versão com o argumento eu uso quando o usuário sai do campo de username (evento de <code>blur</code>), para centralizar as pupilas em 50% novamente.</p><p>Já nos eventos de <code>focus</code> e <code>keyup</code> (quando uma tecla termina de ser pressionada dentro do campo), eu chamo a função acima sem argumentos. Nesse caso, ela vai pegar o campo de usuário e calcular quanto texto já foi entrado. Note que há uma leve &quot;trapaça&quot; para não termos que saber realmente onde o cursor do usuário está: o campo de texto tem um limite de caracteres. No caso do exemplo, no HTML, o limite está em 20. Assim, na função, nós pegamos o número de caracteres que o usuário digitou e dividimos por esse limite. O resultado é um número de 0 a 1, que nós multiplicamos por 100 e limitamos para que fique sempre entre 10 e 90 (valores arbitrários que achei que ficou visualmente agradável para limitar o movimento das pupilas).</p><p>Isso tem algumas consequências: se o campo de texto for muito pequeno, a pupila vai continuar correndo quando o usuário chegar na borda da direita do campo e continuar digitando. Se o nome de usuário for feito por caracteres muito finos (como &quot;iiiiiiiii&quot;), a pupila vai se mover mais rápido que o cursor do campo de texto. Esses problemas podem ser mitigados usando uma fonte monoespaçada e garantindo que na largura vai caber o número de caracteres do limite do campo de texto, mas não me preocupei muito com isso pois, no caso medio, o efeito funciona bem o suficiente.</p><p><strong>É isso que tem pra hoje!</strong> Eu gostei do resultado, ficou um bonequinho razoavelmente agradável com pouco código. Dá para fazer muito mais com mais paciência (e noções de estética). Uma inspiração que eu tenho nessa linha é <a href="https://talitaoliveira.netlify.app/desenhando-nintendo-swicth/">Talita Oliveira</a>, que faz altos desenhos interessantes com CSS! Fica a recomendação de dar uma olhada e se inspirar também.</p></div><hr/><div class="Poststyles__AfterPost-sc-12qb97v-0 tuaWG"><p class="Poststyles__AfterPostChild-sc-12qb97v-1 gkeqUt">Gostou? <a href="https://twitter.com/intent/tweet?text=%22Animando%20um%20personagem%20com%20CSS%20e%20JavaScript%22%20por%20%40Cisneiros%0A%0Ahttps%3A%2F%2Fblog.cisne.dev%2Fanimando-um-personagem-com-css-e-javascript" target="_blank" rel="noopener noreferrer">Que tal compartilhar?</a></p><p class="Poststyles__AfterPostChild-sc-12qb97v-1 Poststyles__Tags-sc-12qb97v-2 fAvgXR">Tags: <span class="Poststyles__Tag-sc-12qb97v-3 kSZCZX"><a href="/tag/css">css</a></span><span class="Poststyles__Tag-sc-12qb97v-3 kSZCZX"><a href="/tag/javascript">javascript</a></span><span class="Poststyles__Tag-sc-12qb97v-3 kSZCZX"><a href="/tag/frontend">frontend</a></span></p></div></article></div></div></main><footer class="Footer__Container-b3q04c-0 gdHjSq"><div class="ui__Fit-prwz6b-0 Footer__FooterFit-b3q04c-1 layJcq"><p>© <a href="https://cisne.dev">Alexandre Cisneiros</a></p><p><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a></p></div></footer></div><script type="text/javascript">window.__routeInfo = JSON.parse("{\"template\":\"__react_static_root__/src/containers/post\",\"sharedHashesByProp\":{},\"data\":{\"postData\":{\"title\":\"Animando um personagem com CSS e JavaScript\",\"date\":\"2020-07-10T00:00:00-03:00\",\"slug\":\"animando-um-personagem-com-css-e-javascript\",\"tags\":[\"css\",\"javascript\",\"frontend\"],\"filePath\":\"2020-07-10-animando-um-personagem-com-css-e-javascript.md\",\"content\":\"CSS \u00E9 uma parada poderosa. Apesar de, originalmente, servir para suportar o HTML e definir estilos para itens em um documento, a comunidade de desenvolvimento front-end mostrou que d\u00E1 para fazer muito mais que isso e cria verdadeiras experi\u00EAncias com CSS, substituindo ferramentas de anima\u00E7\u00E3o e imagens por linhas de c\u00F3digo de folha de estilos. Juntando isso com o dinamismo de JavaScript, d\u00E1 para criar intera\u00E7\u00F5es bem legais diretamente na web, muitas vezes sem assets extra al\u00E9m do pr\u00F3prio c\u00F3digo.\\n\\nEsse post \u00E9 um experimento para criar algo que n\u00E3o \u00E9 novo, mas que \u00E9 divertido e mostra algumas das capacidades de criar anima\u00E7\u00F5es interativas com CSS e JS. Minha ideia \u00E9 tentar fazer uma anima\u00E7\u00E3o para acompanhar um formul\u00E1rio de login sem usar imagens ou outros recursos al\u00E9m de HTML, CSS e JS. **Eu n\u00E3o sou um artista ent\u00E3o n\u00E3o espere uma obra de arte.** A ideia \u00E9, com pouco c\u00F3digo, fazer um efeito que fique legal.\\n\\n\u003C!-- summary-break -->\\n\\n## Como ficou\\n\\nInteraja com os campos de nome de usu\u00E1rio e senha abaixo para animar o personagem.\\n\\n:::live result-first\\n\\n## O c\u00F3digo\\n\\nEsse \u00E9 o c\u00F3digo final. Logo abaixo, vou comentar cada trecho de c\u00F3digo, ressaltar os pontos mais interessantes e explicar algumas partes que n\u00E3o s\u00E3o t\u00E3o claras de cara.\\n\\n```html\\n<div id=\\\"login-form\\\">\\n  <div class=\\\"character\\\">\\n    <div class=\\\"eyes\\\">\\n      <div class=\\\"eye\\\"></div>\\n      <div class=\\\"eye\\\"></div>\\n    </div>\\n  </div>\\n  <input class=\\\"username\\\" type=\\\"text\\\" placeholder=\\\"username\\\" maxlength=\\\"20\\\">\\n  <input class=\\\"password\\\" type=\\\"password\\\" placeholder=\\\"password\\\">\\n</div>\\n```\\n```css\\n#login-form {\\n  --size: 300px;\\n  \\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-around;\\n  align-items: center;\\n  padding: 10%;\\n  width: var(--size);\\n  min-height: var(--size);\\n  border-radius: 10%;\\n  background-color: #d9d1d1;\\n}\\n\\n#login-form input {\\n  padding: 0.25em;\\n  border-radius: 0.5em;\\n}\\n\\n.character {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-around;\\n  align-items: center;\\n  width: calc(var(--size) / 3);\\n  height: calc(var(--size) / 3);\\n  border-radius: 40% 40% 0 0;\\n  background-color: #d95151;\\n}\\n\\n.character .eyes {\\n  --eye-ball-offset: 50%;\\n  --eye-ball-size: 35%;\\n\\n  display: flex;\\n  justify-content: space-evenly;\\n  width: 80%;\\n}\\n\\n.character .eyes .eye {\\n  position: relative;\\n  transition: height 0.2s ease-in;\\n  overflow: hidden;\\n  width: 35%;\\n  border-radius: 50%;\\n  background-color: #190000;\\n}\\n\\n.character .eyes .eye::before {\\n  content: '';\\n  display: block;\\n  transition: padding-top 0.2s ease-in;\\n  padding-top: 100%;\\n}\\n\\n.character .eyes.closed .eye::before {\\n  padding-top: 2px;\\n}\\n\\n.character .eyes .eye::after {\\n  content: '';\\n  position: absolute;\\n  bottom: 5%;\\n  left: var(--eye-ball-offset);\\n  transform: translateX(-50%);\\n  transition: all 0.2s ease-in;\\n  width: var(--eye-ball-size);\\n  height: var(--eye-ball-size);\\n  border-radius: 50%;\\n  background-color: #faffff;\\n}\\n\\n.character .eyes.closed .eye::after {\\n  height: 0;\\n}\\n```\\n```js auto-run\\nconst loginForm = document.querySelector('#login-form')\\nconst characterEyes = loginForm.querySelector('.eyes')\\nconst usernameInput = loginForm.querySelector('.username')\\nconst passwordInput = loginForm.querySelector('.password')\\n\\nfunction updateEyeballPosition(value) {\\n  if (typeof value !== 'number') {\\n    const offset = usernameInput.value.length * (100 / usernameInput.maxLength)\\n    value = Math.max(Math.min(offset, 90), 10)\\n  }\\n\\n  characterEyes.style.setProperty('--eye-ball-offset', `${value}%`);\\n}\\n\\nusernameInput.addEventListener('keyup', () => updateEyeballPosition())\\nusernameInput.addEventListener('focus', () => updateEyeballPosition())\\nusernameInput.addEventListener('blur', () => updateEyeballPosition(50))\\n\\npasswordInput.addEventListener('focus', () => characterEyes.classList.add('closed'))\\npasswordInput.addEventListener('blur', () => characterEyes.classList.remove('closed'))\\n```\\n:::/live\\n\\n## Destrinchando o CSS\\n\\nO HTML \u00E9 razoavelmente auto-explicativo: temos um um personagem e dois campos de texto, um deles para senha. Dentro do personagem, temos `div`s de estrutura com elementos necess\u00E1rios pra construir o desenho e a anima\u00E7\u00E3o. Eu normalmente crio um elemento ra\u00EDz e saio criando mais elementos quando vejo que v\u00E3o ser necess\u00E1rios, como nesse caso foram os olhos (um container em volta deles e um `div` pra cada olho). As pupilas eu deixei para criar pseudoelementos com CSS.\\n\\nO grosso do c\u00F3digo est\u00E1 no CSS. Eu tentei definir medidas relativas dentro do personagem sempre que poss\u00EDvel, para que escal\u00E1-lo fosse mais f\u00E1cil. Deixei como asboluto apenas o tamanho dele (300px).\\n\\nNo personagem, eu usei bastante **flexbox**. \u00C9 um tipo de layout (`display: flex`) que permite que o elemento defina como os elementos diretamente descendentes v\u00E3o se posicionar. No caso do elemento ra\u00EDz do personagem, a dire\u00E7\u00E3o dos elementos \u00E9 na vertical (`flex-direction: column`). Eu tinha planos para por uma boca no in\u00EDcio, mas terminei deixando sem. De toda maneira, colocar na vertical permite centralizar os olhos usando espa\u00E7amento em volta do (\u00FAnico) descendente (`justify-content: space-around`).\\n\\nDentro do elementos que cont\u00E9m os olhos do personagem (`.eyes`), vamos ter dois elementos, um para cada olho (`.eye`). Eles tamb\u00E9m est\u00E3o alinhados dentro usando flex, mas dessa vez a dire\u00E7\u00E3o \u00E9 na horizontal (`row`). Como \u00E9 o padr\u00E3o, n\u00E3o precisa especificar.\\n\\nAgora vem um dos _pulos do gato_: os olhos. Eu queria fazer os olhos serem retangulares (redondos na verdade, mas para chegar no c\u00EDrculo come\u00E7amos em um quadrado). Por\u00E9m, n\u00E3o queria definir valores absolutos para a largura e altura de cada olho. Ao inv\u00E9s disso, queria definir uma largura proporcional a largura do personagem e que a altura do olho fosse igual a largura dele. **S\u00F3 que n\u00E3o \u00E9 t\u00E3o f\u00E1cil.**\\n\\nQuando a gente diz que um elemento tem `width: 50%`, a gente quer dizer que ele tem metade da **largura** (`width`) do parente. Quando a gente diz que ele tem `height: 50%`, ele vai ter metade da **altura** (`height`) do parente. A linha dos olhos n\u00E3o tem uma altura definida, ent\u00E3o um percentual sobre a altura iria resultar em **zero**, se n\u00E3o tiver nenhum outro elemento dentro que defina uma altura.\\n\\nA solu\u00E7\u00E3o pro meu problema era em teoria, simples: eu queria poder especificar a **altura** do olho em fun\u00E7\u00E3o da **largura** do parente, igual como fiz com a pr\u00F3pria largura do olho. Mas n\u00E3o consigo fazer isso diretamente. Ora, se a largura do olho j\u00E1 est\u00E1 em fun\u00E7\u00E3o da largura do parente, se eu conseguir fazer a **altura do olho em fun\u00E7\u00E3o da largura do olho**, d\u00E1 pra resolver o problema!\\n\\nVoc\u00EA, querida pessoa que est\u00E1 lendo este post, sabe como \u00E9 calculado um `padding` relativo (percentual)? Se voc\u00EA respondeu \\\"em fun\u00E7\u00E3o da largura do parente\\\", voc\u00EA acertou! Um `padding-top` de 50%, por exemplo, vai adicionar um espa\u00E7amento interno no topo do elemento do tamanho de **metade da largura do parente**. Isso me ajuda! D\u00E1 para criar um elemento **dentro do olho** e colocar o `padding-top` dele como 100%. Assim, eu vou ter um elemento filho do olho, sem conte\u00FAdo mas com padding, que vai resultar numa altura igual a 100% da largura do olho.\\n\\nParece complicado? **\u00C9 porque \u00E9 mesmo.** Isso seria facilmente resolvido se CSS tivesse uma propriedade como `aspect-ratio: 1:1` por exemplo. Mas enfim, isso funciona. Se voc\u00EA procurar no HTML, n\u00E3o vai encontrar um elemento dentro de `.eye`. Neste caso, eu usei um **pseudoelemento** via CSS, o `::before`. Ele representa um elemento dentro do olho, que vem antes do conte\u00FAdo filho do olho (que n\u00E3o existe, nesse caso). Para um pseudoelemento existir, ele precisa ter um valor no `content`, nem que seja a string vazia (`''`).\\n\\nPara o efeito de fechar o olho, vamos animar o `padding` do pseudoelemento tamb\u00E9m. Por isso, j\u00E1 deixei pronto um `transition`. Quando os olhos estiverem fechados, vamos adicionar a classe `.closed` no container dos olhos (para n\u00E3o ter que adicionar uma vez em cada olho). Assim, quando os olhos estiverem dentro de um `.eyes.closed`, seus pseudoelementos `::before` v\u00E3o ter o padding fixo em `2px`. Resolvi usar um valor absoluto neste padding, para deixar o olho quase sumindo n\u00E3o importa o tamanho do personagem.\\n\\nEnfim, vem outra parte um pouco mais complicada que \u00E9 **animar a pupila**. Para criar a pupila, eu usei outro pseudoelemento, o `::after`. Ele tem a mesma l\u00F3gica do primeiro, mas vem depois do conte\u00FAdo do olho (que n\u00E3o existe), e depois do `::before` por consequ\u00EAncia. Para animar sua posi\u00E7\u00E3o, resolvi deix\u00E1-lo com `position: absolute`. Para que a posi\u00E7\u00E3o seja em rela\u00E7\u00E3o ao olho que contem a pupila, o olho tem `position: relative`.\\n\\nQuerendo facilitar minha vida, para n\u00E3o ter que levar em conta o tamanho da pupila na hora de animar sua posi\u00E7\u00E3o, usei o `transform: translateX(-50%)` para deslocar a pupila para a esquerda em metade da sua largura. Isso n\u00E3o afeta a posi\u00E7\u00E3o do elemento, apenas onde ele vai ser desenhado. Com isso, a posi\u00E7\u00E3o `left` do elemento aponta para o centro da pupila, e n\u00E3o mais para o canto. Um `left` de 0% deixa a pupila metade dentro, metade fora do lado esquerdo do olho, e um `left` de 100% faz o mesmo s\u00F3 que na direita do olho. Para a pupila n\u00E3o aparecer fora do olho, ele tem `overflow: hidden`.\\n\\nComo a pupila vai ser animada tanto no `left`, como no `height` (para ela fechar junto com o olho), coloquei `transition: all` para facilitar minha vida, mas poderia ter escrito para as duas propriedades.\\n\\n## Destrinchando o JavaScript\\n\\nPara esse exemplo, usamos apenas JavaScript nativo do navegador, sem depend\u00EAncias ou bibliotecas, manipulando elementos do DOM diretamente. Refazer essa l\u00F3gica com um Virtual DOM, como o do React, deixaria o c\u00F3digo mais funcional (podendo criar um componente personagem sem estado), e quem sabe eu refa\u00E7a uma vers\u00E3o desse exemplo com React.\\n\\nTemos dois comportamentos que queremos controlar: o movimento da pupila conforme o usu\u00E1rio digita e o abrir/fechar dos olhos quando o campo de senha \u00E9 utilizado.\\n\\nCome\u00E7ando pelos abrir e fechar dos olhos, que \u00E9 mais simples: quando o `input` de senha recebe o foco (ou seja, \u00E9 selecionado para digita\u00E7\u00E3o, e recebe o evento de `focus`), adicionamos a classe `.closed` no container dos olhos (`.eyes`). Isso vai mudar o `padding-top` do pseudoelemento `::before` de cada olho para 2px, que vai ser animado por conta da `transition`. Quando o usu\u00E1rio sair desse campo e ele perder o foco (o evento de `blur`), n\u00F3s retiramos a classe. Simples assim.\\n\\nAgora, para movimentar as pupilas. Eu criei uma fun\u00E7\u00E3o que troca o `left` das pupilas atrav\u00E9s de uma **vari\u00E1vel de CSS**, a `--eye-ball-offset`. Eu n\u00E3o precisava usar uma vari\u00E1vel de CSS para isso, mas facilita para mudar o posicionamento nos dois olhos ao mesmo tempo. Mudar a vari\u00E1vel em um elemento altera o valor para todos os descendentes deste elemento, por isso coloquei a vari\u00E1vel no container dos olhos (`.eyes`).\\n\\nEssa fun\u00E7\u00E3o, se receber um par\u00E2metro e ele for um n\u00FAmero, vai interpret\u00E1-lo como um n\u00FAmero percentual (0-100) e trocar o valor da vari\u00E1vel por esse valor (com um `%` no fim). Essa vers\u00E3o com o argumento eu uso quando o usu\u00E1rio sai do campo de username (evento de `blur`), para centralizar as pupilas em 50% novamente.\\n\\nJ\u00E1 nos eventos de `focus` e `keyup` (quando uma tecla termina de ser pressionada dentro do campo), eu chamo a fun\u00E7\u00E3o acima sem argumentos. Nesse caso, ela vai pegar o campo de usu\u00E1rio e calcular quanto texto j\u00E1 foi entrado. Note que h\u00E1 uma leve \\\"trapa\u00E7a\\\" para n\u00E3o termos que saber realmente onde o cursor do usu\u00E1rio est\u00E1: o campo de texto tem um limite de caracteres. No caso do exemplo, no HTML, o limite est\u00E1 em 20. Assim, na fun\u00E7\u00E3o, n\u00F3s pegamos o n\u00FAmero de caracteres que o usu\u00E1rio digitou e dividimos por esse limite. O resultado \u00E9 um n\u00FAmero de 0 a 1, que n\u00F3s multiplicamos por 100 e limitamos para que fique sempre entre 10 e 90 (valores arbitr\u00E1rios que achei que ficou visualmente agrad\u00E1vel para limitar o movimento das pupilas).\\n\\nIsso tem algumas consequ\u00EAncias: se o campo de texto for muito pequeno, a pupila vai continuar correndo quando o usu\u00E1rio chegar na borda da direita do campo e continuar digitando. Se o nome de usu\u00E1rio for feito por caracteres muito finos (como \\\"iiiiiiiii\\\"), a pupila vai se mover mais r\u00E1pido que o cursor do campo de texto. Esses problemas podem ser mitigados usando uma fonte monoespa\u00E7ada e garantindo que na largura vai caber o n\u00FAmero de caracteres do limite do campo de texto, mas n\u00E3o me preocupei muito com isso pois, no caso medio, o efeito funciona bem o suficiente.\\n\\n**\u00C9 isso que tem pra hoje!** Eu gostei do resultado, ficou um bonequinho razoavelmente agrad\u00E1vel com pouco c\u00F3digo. D\u00E1 para fazer muito mais com mais paci\u00EAncia (e no\u00E7\u00F5es de est\u00E9tica). Uma inspira\u00E7\u00E3o que eu tenho nessa linha \u00E9 [Talita Oliveira](https://talitaoliveira.netlify.app/desenhando-nintendo-swicth/), que faz altos desenhos interessantes com CSS! Fica a recomenda\u00E7\u00E3o de dar uma olhada e se inspirar tamb\u00E9m.\\n\",\"readingTime\":10,\"summary\":\"CSS \u00E9 uma parada poderosa. Apesar de, originalmente, servir para suportar o HTML e definir estilos para itens em um documento, a comunidade de desenvolvimento front-end mostrou que d\u00E1 para fazer muito mais que isso e cria verdadeiras experi\u00EAncias com CSS, substituindo ferramentas de anima\u00E7\u00E3o e imagens por linhas de c\u00F3digo de folha de estilos. Juntando isso com o dinamismo de JavaScript, d\u00E1 para criar intera\u00E7\u00F5es bem legais diretamente na web, muitas vezes sem assets extra al\u00E9m do pr\u00F3prio c\u00F3digo.\\n\\nEsse post \u00E9 um experimento para criar algo que n\u00E3o \u00E9 novo, mas que \u00E9 divertido e mostra algumas das capacidades de criar anima\u00E7\u00F5es interativas com CSS e JS. Minha ideia \u00E9 tentar fazer uma anima\u00E7\u00E3o para acompanhar um formul\u00E1rio de login sem usar imagens ou outros recursos al\u00E9m de HTML, CSS e JS. **Eu n\u00E3o sou um artista ent\u00E3o n\u00E3o espere uma obra de arte.** A ideia \u00E9, com pouco c\u00F3digo, fazer um efeito que fique legal.\\n\\n\"}},\"path\":\"animando-um-personagem-com-css-e-javascript\",\"sharedData\":{},\"siteData\":{}}");</script><script defer="" type="text/javascript" src="/templates/vendors~__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.207edc50.js"></script><script defer="" type="text/javascript" src="/templates/__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.a04ea84b.js"></script><script defer="" type="text/javascript" src="/templates/__react_static_root__/src/containers/post.d8dd52db.js"></script><script defer="" type="text/javascript" src="/templates/vendors~main.272ae1d1.js"></script><script defer="" type="text/javascript" src="/main.f19d4c14.js"></script></body></html>