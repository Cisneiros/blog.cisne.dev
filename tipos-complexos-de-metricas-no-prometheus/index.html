<!DOCTYPE html><html lang="pt-BR" class=" "><head><meta name="generator" content="React Static"/><title data-react-helmet="true">Tipos complexos de métricas no Prometheus · Cisne.dev blog</title><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="Cisneiros"/><meta data-react-helmet="true" property="og:title" content="Tipos complexos de métricas no Prometheus · Cisne.dev blog"/><meta data-react-helmet="true" property="og:image" content="https://blog.cisne.dev/tipos-complexos-de-metricas-no-prometheus/social-image.png"/><meta data-react-helmet="true" name="twitter:title" content="Tipos complexos de métricas no Prometheus · Cisne.dev blog"/><meta data-react-helmet="true" name="twitter:image" content="https://blog.cisne.dev/tipos-complexos-de-metricas-no-prometheus/social-image.png"/><link rel="preload" as="script" href="/templates/vendors~__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.207edc50.js"/><link rel="preload" as="script" href="/templates/__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.a04ea84b.js"/><link rel="preload" as="script" href="/templates/__react_static_root__/src/containers/post.d8dd52db.js"/><link rel="preload" as="script" href="/templates/vendors~main.272ae1d1.js"/><link rel="preload" as="script" href="/main.f19d4c14.js"/><link data-react-helmet="true" rel="stylesheet" href="//unpkg.com/dracula-prism/dist/css/dracula-prism.min.css"/><style data-styled="" data-styled-version="5.1.1">.CfxHf{max-width:960px;margin:0 auto;position:relative;}/*!sc*/
data-styled.g1[id="ui__Fit-prwz6b-0"]{content:"CfxHf,"}/*!sc*/
.iuDFSN{padding:1rem;color:var(--color-mid);text-align:center;font-size:1.5rem;}/*!sc*/
.iuDFSN a,.iuDFSN a:hover{-webkit-text-decoration:none;text-decoration:none;color:inherit;}/*!sc*/
data-styled.g2[id="Navigation__Container-sc-1yk0pqp-0"]{content:"iuDFSN,"}/*!sc*/
.izuwCZ{max-width:960px;margin:0 auto;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g3[id="Navigation__NavFit-sc-1yk0pqp-1"]{content:"izuwCZ,"}/*!sc*/
.TctaC{width:2.5rem;height:1.2em;overflow:hidden;--default-rotation:-180deg;}/*!sc*/
@media (prefers-color-scheme:dark){.TctaC{--default-rotation:0;}}/*!sc*/
data-styled.g4[id="Navigation__BrightnessContainer-sc-1yk0pqp-2"]{content:"TctaC,"}/*!sc*/
.sLeDt{-webkit-transform:rotate(var(--default-rotation));-ms-transform:rotate(var(--default-rotation));transform:rotate(var(--default-rotation));-webkit-transition:-webkit-transform 0.3s ease-out;-webkit-transition:transform 0.3s ease-out;transition:transform 0.3s ease-out;}/*!sc*/
html.light .sLeDt{-webkit-transform:rotate(-180deg);-ms-transform:rotate(-180deg);transform:rotate(-180deg);}/*!sc*/
html.dark .sLeDt{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}/*!sc*/
data-styled.g5[id="Navigation__BrightnessSpinner-sc-1yk0pqp-3"]{content:"sLeDt,"}/*!sc*/
.frsARl{background:none;border:none;cursor:pointer;}/*!sc*/
.frsARl:last-child{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}/*!sc*/
data-styled.g7[id="Navigation__BrightnessIcon-sc-1yk0pqp-5"]{content:"frsARl,"}/*!sc*/
.gdHjSq{margin-top:3rem;padding:1rem;background:var(--color-foreground);color:var(--color-background);}/*!sc*/
.gdHjSq a{color:var(--text-inverse-color-1);}/*!sc*/
.gdHjSq a:hover{color:var(--text-inverse-color-3);}/*!sc*/
data-styled.g8[id="Footer__Container-b3q04c-0"]{content:"gdHjSq,"}/*!sc*/
.layJcq{max-width:960px;margin:0 auto;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g9[id="Footer__FooterFit-b3q04c-1"]{content:"layJcq,"}/*!sc*/
*{box-sizing:border-box;margin:0;padding:0;border:0;font-size:inherit;font-weight:inherit;font-style:inherit;}/*!sc*/
:root{--color-1:#12c2e9;--color-2:#c471ed;--color-3:#f64f59;--color-1-darker:#0A7B94;--color-2-darker:#AE3CE7;--color-3-darker:#E90C1B;--color-light:#fefefe;--color-dark:#030303;--color-mid-dark:#747481;--color-mid-light:#818181;--font-weight-light:300;--font-weight-regular:400;--font-weight-heavy:500;--font-family-light:"HelveticaNeue-Light","Helvetica Neue Light",'Helvetica Neue',sans-serif;--font-family:'Helvetica Neue',sans-serif;}/*!sc*/
strong,h1,h2,h3,h4,h5,h6{font-family:var(--font-family);}/*!sc*/
html{font-family:var(--font-family-light);font-size:20px;line-height:1;color:var(--color-foreground);background-color:var(--color-background);text-rendering:optimizeLegibility;}/*!sc*/
@media (max-width:600px){html{font-size:16px;}}/*!sc*/
html,html.light{--color-background:var(--color-light);--color-foreground:var(--color-dark);--color-mid:var(--color-mid-dark);--text-color-1:var(--color-1-darker);--text-color-2:var(--color-2-darker);--text-color-3:var(--color-3-darker);--text-inverse-color-1:var(--color-1);--text-inverse-color-2:var(--color-2);--text-inverse-color-3:var(--color-3);}/*!sc*/
html.dark{--color-background:var(--color-dark);--color-foreground:var(--color-light);--color-mid:var(--color-mid-light);--text-color-1:var(--color-1);--text-color-2:var(--color-2);--text-color-3:var(--color-3);--text-inverse-color-1:var(--color-1-darker);--text-inverse-color-2:var(--color-2-darker);--text-inverse-color-3:var(--color-3-darker);}/*!sc*/
@media (prefers-color-scheme:dark){html{--color-background:var(--color-dark);--color-foreground:var(--color-light);--color-mid:var(--color-mid-light);}}/*!sc*/
body{font-size:1em;font-weight:var(--font-weight-light);}/*!sc*/
strong{font-weight:var(--font-weight-heavy);}/*!sc*/
em{font-style:italic;}/*!sc*/
main{padding:1rem;}/*!sc*/
hr{width:30%;margin:4rem auto;border:none;border-bottom:dotted 1px var(--color-1);}/*!sc*/
.pagination{text-align:center;}/*!sc*/
.pagination a{color:var(--text-color-1);}/*!sc*/
.pagination a:hover{color:var(--text-color-3);}/*!sc*/
a{color:var(--text-color-1);-webkit-text-decoration-color:#c471ed80;text-decoration-color:#c471ed80;-webkit-text-decoration-style:wavy;text-decoration-style:wavy;}/*!sc*/
a:hover{color:var(--text-color-3);-webkit-text-decoration-color:#12c2e980;text-decoration-color:#12c2e980;}/*!sc*/
.phone-mockup{max-width:15rem;margin:0 auto 1rem;position:relative;}/*!sc*/
.phone-mockup::before{content:'';width:100%;height:100%;position:absolute;pointer-events:none;background:url(/iphone-11-pro.png) no-repeat;background-size:contain;}/*!sc*/
.phone-mockup video,.phone-mockup img{width:100%;padding:9.3%;}/*!sc*/
data-styled.g14[id="sc-global-hFBrmQ1"]{content:"sc-global-hFBrmQ1,"}/*!sc*/
.tuaWG{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
@media (max-width:600px){.tuaWG{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}/*!sc*/
data-styled.g23[id="Poststyles__AfterPost-sc-12qb97v-0"]{content:"tuaWG,"}/*!sc*/
.gkeqUt{-webkit-flex:1;-ms-flex:1;flex:1;}/*!sc*/
@media (max-width:600px){.gkeqUt{text-align:center;margin-bottom:1rem;}}/*!sc*/
data-styled.g24[id="Poststyles__AfterPostChild-sc-12qb97v-1"]{content:"gkeqUt,"}/*!sc*/
.fAvgXR{-webkit-flex:1;-ms-flex:1;flex:1;text-align:right;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}/*!sc*/
@media (max-width:600px){.fAvgXR{text-align:center;margin-bottom:1rem;}}/*!sc*/
data-styled.g25[id="Poststyles__Tags-sc-12qb97v-2"]{content:"fAvgXR,"}/*!sc*/
.kSZCZX::before{content:' #';color:var(--color-mid);}/*!sc*/
data-styled.g26[id="Poststyles__Tag-sc-12qb97v-3"]{content:"kSZCZX,"}/*!sc*/
.kyWzPB{-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto;}/*!sc*/
data-styled.g27[id="Poststyles__Container-sc-12qb97v-4"]{content:"kyWzPB,"}/*!sc*/
.hhBwVH{font-size:5rem;font-weight:var(--font-weight-regular);line-height:0.8;background:linear-gradient(var(--color-1),var(--color-2),var(--color-3));-webkit-text-fill-color:transparent;background-clip:text;-webkit-background-clip:text;padding-bottom:1rem;margin:1rem 0;}/*!sc*/
html.rainbow .hhBwVH{background-image:linear-gradient(124deg,#ff2400,#e81d1d,#e8b71d,#e3e81d,#1de840,#1ddde8,#2b1de8,#dd00f3,#dd00f3);-webkit-animation:hTUzwZ 9s ease infinite;animation:hTUzwZ 9s ease infinite;background-size:450% 450%;}/*!sc*/
@media (max-width:600px){.hhBwVH{font-size:3.5rem;}}/*!sc*/
.hhBwVH a{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g28[id="Poststyles__Title-sc-12qb97v-5"]{content:"hhBwVH,"}/*!sc*/
.fonWHZ{color:var(--color-mid);text-align:center;margin-bottom:2rem;}/*!sc*/
data-styled.g29[id="Poststyles__Meta-sc-12qb97v-6"]{content:"fonWHZ,"}/*!sc*/
.jhgzPU{line-height:1.6;}/*!sc*/
.jhgzPU h2{font-size:2.5rem;}/*!sc*/
.jhgzPU h3{font-size:2rem;}/*!sc*/
.jhgzPU h4{font-size:1.5rem;}/*!sc*/
.jhgzPU h2,.jhgzPU h3,.jhgzPU h4,.jhgzPU h5,.jhgzPU h6{-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto;font-weight:var(--font-weight-regular);line-height:0.8;padding-bottom:1rem;margin-top:2rem;}/*!sc*/
.jhgzPU img{max-width:100%;}/*!sc*/
.jhgzPU pre.refractor{margin-top:0;margin-left:0;padding-left:1rem;border-left:solid 0.25rem var(--color-1);border-radius:0;font-size:0.8rem;overflow-wrap:normal;overflow-x:auto;background-color:var(--color-dark);color:var(--color-light);padding-top:0.5rem;padding-bottom:0.5rem;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}/*!sc*/
.jhgzPU pre.refractor::-webkit-scrollbar{width:0.25rem;height:0.25rem;}/*!sc*/
.jhgzPU pre.refractor code,.jhgzPU code{font-family:'Fira Code','Menlo',monospace;}/*!sc*/
.jhgzPU p code{color:var(--text-color-3);}/*!sc*/
.jhgzPU p code,.jhgzPU h1 code,.jhgzPU h2 code,.jhgzPU h3 code,.jhgzPU h4 code,.jhgzPU h5 code,.jhgzPU h6 code{font-size:0.9em;}/*!sc*/
.jhgzPU p,.jhgzPU pre,.jhgzPU ul,.jhgzPU ol,.jhgzPU table,.jhgzPU blockquote,.jhgzPU .live-code-container{margin-bottom:1rem;}/*!sc*/
.jhgzPU twitter-widget{margin-bottom:1rem !important;}/*!sc*/
.jhgzPU p:last-child,.jhgzPU pre:last-child,.jhgzPU ul:last-child,.jhgzPU ol:last-child,.jhgzPU table:last-child,.jhgzPU blockquote:last-child,.jhgzPU .live-code-container:last-child{margin-bottom:0;}/*!sc*/
.jhgzPU ul,.jhgzPU ol{list-style:none;margin-left:1rem;counter-reset:li;}/*!sc*/
.jhgzPU li{counter-increment:li;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
.jhgzPU ul li::before{content:'•';margin-right:0.5rem;color:var(--color-2);}/*!sc*/
.jhgzPU ol li::before{content:"."counter(li);margin-right:0.5rem;color:var(--color-2);font-weight:var(--font-weight-regular);width:1em;display:inline-block;margin-left:-0.5em;margin-right:0.5em;text-align:right;direction:rtl;}/*!sc*/
.jhgzPU table{margin-left:auto;margin-right:auto;border-spacing:0;font-size:0.9em;}/*!sc*/
.jhgzPU td,.jhgzPU th{border-bottom:solid 1px var(--color-2);padding:0.5rem;}/*!sc*/
.jhgzPU th{font-weight:var(--font-weight-heavy);}/*!sc*/
.jhgzPU tr:hover{background:var(--color-2);}/*!sc*/
.jhgzPU tr:last-of-type td{border-bottom:0;}/*!sc*/
.jhgzPU blockquote{padding-left:1rem;border-left:solid 0.25rem var(--color-3);color:var(--color-mid);}/*!sc*/
data-styled.g30[id="Poststyles__Content-sc-12qb97v-7"]{content:"jhgzPU,"}/*!sc*/
.jjKdZc{position:fixed;top:0;left:0;right:0;height:0.25rem;background-color:var(--color-1);-webkit-transition:opacity 0.25s ease-out;transition:opacity 0.25s ease-out;z-index:2;}/*!sc*/
data-styled.g31[id="post__ScrollTrackerContainer-gh0jqu-0"]{content:"jjKdZc,"}/*!sc*/
@-webkit-keyframes hTUzwZ{0%{background-position:0% 82%;}50%{background-position:100% 19%;}100%{background-position:0% 82%;}}/*!sc*/
@keyframes hTUzwZ{0%{background-position:0% 82%;}50%{background-position:100% 19%;}100%{background-position:0% 82%;}}/*!sc*/
data-styled.g32[id="sc-keyframes-hTUzwZ"]{content:"hTUzwZ,"}/*!sc*/
</style><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml"/></head><body><div id="root"><nav class="Navigation__Container-sc-1yk0pqp-0 iuDFSN"><div class="ui__Fit-prwz6b-0 Navigation__NavFit-sc-1yk0pqp-1 izuwCZ"><p class="logo"><a href="/">Cisne.dev blog</a></p><div class="Navigation__BrightnessContainer-sc-1yk0pqp-2 TctaC"><div class="Navigation__BrightnessSpinner-sc-1yk0pqp-3 sLeDt"><button title="Mudar para modo diurno" aria-label="Mudar para modo diurno" class="Navigation__ClearButton-sc-1yk0pqp-4 Navigation__BrightnessIcon-sc-1yk0pqp-5 frsARl">🌙</button><button title="Mudar para modo noturno" aria-label="Mudar para modo noturno" class="Navigation__ClearButton-sc-1yk0pqp-4 Navigation__BrightnessIcon-sc-1yk0pqp-5 frsARl">☀️</button></div></div></div></nav><main><div class="ui__Fit-prwz6b-0 CfxHf"><div><div style="width:0%;opacity:0" class="post__ScrollTrackerContainer-gh0jqu-0 jjKdZc"></div><article class="Poststyles__Container-sc-12qb97v-4 kyWzPB"><h1 class="Poststyles__Title-sc-12qb97v-5 hhBwVH"><a href="/tipos-complexos-de-metricas-no-prometheus/">Tipos complexos de métricas no Prometheus</a></h1><p class="Poststyles__Meta-sc-12qb97v-6 fonWHZ">Publicado em <!-- -->30 jun 2020<!-- -->. Uns <!-- -->7<!-- --> minutos de leitura.</p><div class="Poststyles__Content-sc-12qb97v-7 jhgzPU content"><p>O Prometheus, <a href="/tipos-primitivos-de-metricas-no-prometheus/">além dos tipos primitivos de métricas</a>, possui dois tipos mais complexos para monitorar métricas com mais nuances do que apenas contadores e medidas. Esses tipos são o <strong>histograma</strong> e o <strong>sumário</strong>. Eles são parecidos no sentido de que dá para fazer certas análises em cima de ambos os tipos, mas possuem algumas diferenças sutís em que um pode ser melhor que o outro, a depender da situação.</p><span><!-- summary-break --></span><h2>📊 Histograma (histogram)</h2><p>Quem cursou alguma matéria de estatística deve lembrar (ou não) do que é um histograma. Ele é um <strong>diagrama cuja área de cada barra e proporcional a frequência de uma variável</strong> (a definição é maior do que isso, mas para o que vamos falar aqui é suficiente).</p><p>No contexto do Prometheus, um histograma é uma maneira de monitorar <strong>observações</strong> de um evento. Mas um contador também é, e aí? A diferença é que o histograma monitora a <strong>distribuição de valores observados</strong>. Para isso, ele recebe uma definição de <strong>intervalos</strong> (chamados <em>buckets</em>). Cada intervalo vai gerar um <strong>contador</strong> separado, com uma dimensão <code>le</code> (menor ou igual, em inglês <em>less than or equal</em>).</p><p>Supondo que você tem uma métrica de latência de requisições HTTP, e você quer monitorar monitorar qual o percentual destas requisições duram até 200 e até 500 milissegundos. Um histograma com com dois intervalos (até 200 ms e até 500 ms) vai te dar essa resposta. Note que, na verdade, há três intervalos pois automaticamente você vai ter um intervalo de <strong>até infinito</strong>, para registrar as ocorrências que não estão dentro de nenhum dos intervalos que você definiu.</p><p>Dada uma distribuição de latências com essas durações, em milissegundos: <code>20, 30, 300, 200, 900, 500, 1200</code>, teríamos as seguintes séries temporais:</p><table><thead><tr><th>Métrica</th><th style="text-align:center">Valor</th></tr></thead><tbody><tr><td><code>http_request_duration_seconds_bucket{le=&quot;0.2&quot;}</code></td><td style="text-align:center">3</td></tr><tr><td><code>http_request_duration_seconds_bucket{le=&quot;0.5&quot;}</code></td><td style="text-align:center">5</td></tr><tr><td><code>http_request_duration_seconds_bucket{le=&quot;+Inf&quot;}</code></td><td style="text-align:center">7</td></tr><tr><td><code>http_request_duration_seconds_sum</code></td><td style="text-align:center">3150</td></tr><tr><td><code>http_request_duration_seconds_count</code></td><td style="text-align:center">7</td></tr></tbody></table><p>Note que os intervalos são <strong>cumulativos</strong>. Assim, caso queiramos saber o percentual de requisições que está abaixo de 500 ms, podemos pensar em fazer a query:</p><pre class="refractor language-js"><code class="language-js">http_request_duration_seconds_bucket<span class="token punctuation">{</span>le<span class="token operator">=</span><span class="token string">&quot;0.5&quot;</span><span class="token punctuation">}</span>
<span class="token operator">/</span>
http_request_duration_seconds_bucket<span class="token punctuation">{</span>le<span class="token operator">=</span><span class="token string">&quot;+Inf&quot;</span><span class="token punctuation">}</span></code></pre><p>Note que, na prática, podemos ter várias <strong>outras dimensões</strong> que podem ser agrupadas. Por exemplo, se uma dimensão for o caminho da requisição, a consulta acima vai retornar uma série temporal para cada combinação de <code>le</code> e <code>path</code>. </p><table><thead><tr><th>Métrica</th><th style="text-align:center">Valor</th></tr></thead><tbody><tr><td><code>http_request_duration_seconds_bucket{path=&quot;/&quot;, le=&quot;0.2&quot;}</code></td><td style="text-align:center">3</td></tr><tr><td><code>http_request_duration_seconds_bucket{path=&quot;/&quot;, le=&quot;0.5&quot;}</code></td><td style="text-align:center">5</td></tr><tr><td><code>http_request_duration_seconds_bucket{path=&quot;/&quot;, le=&quot;+Inf&quot;}</code></td><td style="text-align:center">7</td></tr><tr><td><code>http_request_duration_seconds_sum{path=&quot;/&quot;}</code></td><td style="text-align:center">3150</td></tr><tr><td><code>http_request_duration_seconds_count{path=&quot;/&quot;}</code></td><td style="text-align:center">7</td></tr><tr><td><code>http_request_duration_seconds_bucket{path=&quot;/help&quot;, le=&quot;0.2&quot;}</code></td><td style="text-align:center">2</td></tr><tr><td><code>http_request_duration_seconds_bucket{path=&quot;/help&quot;, le=&quot;0.5&quot;}</code></td><td style="text-align:center">10</td></tr><tr><td><code>http_request_duration_seconds_bucket{path=&quot;/help&quot;, le=&quot;+Inf&quot;}</code></td><td style="text-align:center">18</td></tr><tr><td><code>http_request_duration_seconds_sum{path=&quot;/help&quot;}</code></td><td style="text-align:center">4125</td></tr><tr><td><code>http_request_duration_seconds_count{path=&quot;/help&quot;}</code></td><td style="text-align:center">18</td></tr></tbody></table><p>Se adicionarmos o código de retorno, é mais uma dimensão para multiplicar a quantidade de séries temporais retornadas. Além disso, faz sentido olhar para essa métrica numa <strong>janela deslizante</strong> (por exemplo, os últimos 5 minutos). Do contrário, vamos analisar valores desde que a aplicação começou a rodar. Podemos agrupar com <code>sum</code> e analisar ao longo do tempo com <code>rate</code>.</p><pre class="refractor language-js"><code class="language-js"><span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">rate</span><span class="token punctuation">(</span>http_request_duration_seconds_bucket<span class="token punctuation">{</span>le<span class="token operator">=</span><span class="token string">&quot;0.5&quot;</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token number">10</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">/</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">rate</span><span class="token punctuation">(</span>http_request_duration_seconds_count<span class="token punctuation">[</span><span class="token number">10</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>Como estamos agregando, podemos dividir tanto pelo <em>bucket</em> de limite infinito como pela métrica <code>_count</code>, pois o <code>sum</code> vai tirar as dimensões. Se tentássemos usar o <code>_count</code> no primeiro exemplo, não iria funcionar pois essa métrica não tem a dimensão <code>le</code>, então a divisão não iria acontecer. O intervalo com limite infinito e a métrica <code>_count</code> vão ter sempre o mesmo valor.</p><h2>📉 Sumário (summary)</h2><p>No Prometheus, um sumário é usado principalmente para <strong>caulcular percentis</strong> (voltando à aula de estatística). Um percentil é um valor que divide a população de acordo com a distribuição de valores de uma variável. Em outras palavras, usamos percentis quando queremos saber <strong>qual o maior valor que um percentual dos eventos tem</strong>.</p><p>Um percentil muito conhecido é o percentil 50 (ou <code>p50</code>). Ele é a <strong>mediana</strong> de um conjunto de valores. Dizer que a mediana, ou p50, de um conjunto é 10 significa que 50% dos valores é menor ou igual a 10. O uso de percentis é interessante pois, diferentemente da média aritimética, os percentis descartam valores excepcionalmente discrepantes mais facilmente. </p><p>Estes percentis são calculados do <strong>cliente</strong> (ou seja, na aplicação que está gerando as métricas) e são pré-definidos por você. Para cada percentil escolhido, o cliente do Prometheus vai gerar uma métrica com uma dimensão <code>quantile</code> (variando de 0 a 1, inclusive). Usando poucas observações é mais chato dar um exemplo numérico, mas as séries temporais geradas a partir de um sumário vão parecer com essas, dada a escolha dos percentis 50, 90 e 95:</p><table><thead><tr><th>Métrica</th><th style="text-align:center">Valor</th></tr></thead><tbody><tr><td><code>http_request_duration_seconds{quantile=&quot;0.5&quot;}</code></td><td style="text-align:center">50</td></tr><tr><td><code>http_request_duration_seconds{quantile=&quot;0.9&quot;}</code></td><td style="text-align:center">135</td></tr><tr><td><code>http_request_duration_seconds{quantile=&quot;0.95&quot;}</code></td><td style="text-align:center">450</td></tr><tr><td><code>http_request_duration_seconds_sum</code></td><td style="text-align:center">72843</td></tr><tr><td><code>http_request_duration_seconds_count</code></td><td style="text-align:center">40</td></tr></tbody></table><p>Note que o sumário também expõe duas métricas adicionais, <code>_sum</code> e <code>_count</code>. Com elas, assim como nas do histograma, podemos calcular uma média aritimética simples. Já os percentis já estão calculados, e não precisamos fazer nenhuma agregação. Aliás, não só não precisamos como <strong>não podemos</strong>.</p><p>Deixa eu dizer mais alto pra galera lá atrás: <strong>não podemos agregar percentis</strong>. <a href="https://latencytipoftheday.blogspot.de/2014/06/latencytipoftheday-you-cant-average.html">Agregações de percentis não têm significado</a>. Isso quer dizer que, ao utilizar um sumário (que nos dá percentis), nós não podemos somar, tirar alguma outra média (aritimética ou até outro percentil), e por aí vai. <strong>Não sucumba à tentação.</strong></p><p>Isso também implica nossas métricas precisarem ser geradas apenas com as dimensões necessárias desde o início, pois na hora da consulta não podemos juntar os percentis, por exemplo, de todos os códigos de resposta numa métrica de percentil só. Se queremos analisar essa métrica deste jeito, o cliente (nossa aplicação) deve reportá-la sem separar por esta dimensão.</p><p>E se você quiser ter mais flexibilidade? Podemos calcular percentis com um outro tipo de métrica no Prometheus. E você já conhece ela.</p><h2>📊 Histograma 2: O Inimigo Agora é Outro</h2><p>Os histogramas podem ser usados para estimar, de maneira razoavel, percentis <strong>em tempo de consulta</strong>. Ou seja, podemos usar as séries temporais de uma métrica do tipo histograma para calcular uma série temporal que representa um percentil. </p><p>O Prometheus tem uma função para isso, a <code>histogram_quantile</code>. Ela recebe um histograma (ou seja, uma lista de séries temporais com a dimensão <code>le</code>) e um quantil (um número de 0 a 1, inclusive, como no sumário). Usando as métricas do primeiro exemplo com histograma, podemos fazer uma consulta do <code>p90</code> considerando uma janela de 10 minutos assim:</p><pre class="refractor language-js"><code class="language-js"><span class="token function">histogram_quantile</span><span class="token punctuation">(</span><span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token function">rate</span><span class="token punctuation">(</span>http_request_duration_seconds_bucket<span class="token punctuation">[</span><span class="token number">10</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p>O exemplo acima não tem uma agregação, como somar os intervalos. Para agrupar todas as dimensões, podemos usar o <code>sum</code> novamente. Porém, dessa vez, precisamos <strong>manter o agrupamento por intervalo (<code>le</code>)</strong>. Do contrário, a função <code>histogram_quantile</code> não vai funcionar.</p><pre class="refractor language-js"><code class="language-js"><span class="token function">histogram_quantile</span><span class="token punctuation">(</span><span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">rate</span><span class="token punctuation">(</span>http_request_duration_seconds_bucket<span class="token punctuation">[</span><span class="token number">10</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">by</span> <span class="token punctuation">(</span>le<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>Caso queiramos ter mais de um percentil com mesmo valor retornado, separado por uma dimensão específica (por exemplo, <code>status_code</code>), podemos adicioná-lo no agrupamento com o <code>le</code>.</p><pre class="refractor language-js"><code class="language-js"><span class="token function">histogram_quantile</span><span class="token punctuation">(</span><span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token function">rate</span><span class="token punctuation">(</span>http_request_duration_seconds_bucket<span class="token punctuation">[</span><span class="token number">10</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">by</span> <span class="token punctuation">(</span>status_code<span class="token punctuation">,</span> le<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>É importante ressaltar que os percentis que temos aqui são <strong>aproximados</strong>. No caso dos calculados a partir do histograma, a qualidade da aproximação depende da escolha dos intervalos. O ideal é que os intervalos consigam representar bem a distribuição dos valores. Se todas as observações caírem em um <em>bucket</em> só, o cálculo do percentil não vai ser realista. </p><p>Dito isso, faz se você quer agregar os dados e calcular percentis diferentes em tempo de consulta, <strong>histogramas são a única maneira válida</strong>. Do contrário, histograma e sumário funcionam. Se você consegue estimar valores para os intervalos do histograma que representam bem a possível distribuição dos valores observados, use um histograma pois você tem bem mais flexibilidade para criar consultas e alertas sem mexer na aplicação. Se você precisa de percentis mais precisos, e pode definir em quais percentis tem interesse a nivel da aplicação, o sumário vai te servir bem.</p><p>A documentação do Prometheus tem uma <a href="https://prometheus.io/docs/practices/histograms/">página dedicada a histogramas e sumários</a> que fala bastante sobre o que a gente viu aqui. Caso queira ler mais sobre as diferenças entre essas métricas, ela é um bom recurso!</p></div><hr/><div class="Poststyles__AfterPost-sc-12qb97v-0 tuaWG"><p class="Poststyles__AfterPostChild-sc-12qb97v-1 gkeqUt">Gostou? <a href="https://twitter.com/intent/tweet?text=%22Tipos%20complexos%20de%20m%C3%A9tricas%20no%20Prometheus%22%20por%20%40Cisneiros%0A%0Ahttps%3A%2F%2Fblog.cisne.dev%2Ftipos-complexos-de-metricas-no-prometheus" target="_blank" rel="noopener noreferrer">Que tal compartilhar?</a></p><p class="Poststyles__AfterPostChild-sc-12qb97v-1 Poststyles__Tags-sc-12qb97v-2 fAvgXR">Tags: <span class="Poststyles__Tag-sc-12qb97v-3 kSZCZX"><a href="/tag/prometheus">prometheus</a></span><span class="Poststyles__Tag-sc-12qb97v-3 kSZCZX"><a href="/tag/monitoring">monitoring</a></span></p></div></article></div></div></main><footer class="Footer__Container-b3q04c-0 gdHjSq"><div class="ui__Fit-prwz6b-0 Footer__FooterFit-b3q04c-1 layJcq"><p>© <a href="https://cisne.dev">Alexandre Cisneiros</a></p><p><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a></p></div></footer></div><script type="text/javascript">window.__routeInfo = JSON.parse("{\"template\":\"__react_static_root__/src/containers/post\",\"sharedHashesByProp\":{},\"data\":{\"postData\":{\"title\":\"Tipos complexos de m\u00E9tricas no Prometheus\",\"date\":\"2020-06-30T00:00:00-03:00\",\"slug\":\"tipos-complexos-de-metricas-no-prometheus\",\"tags\":[\"prometheus\",\"monitoring\"],\"filePath\":\"2020-06-30-tipos-complexos-de-metricas-no-prometheus.md\",\"content\":\"O Prometheus, [al\u00E9m dos tipos primitivos de m\u00E9tricas](/tipos-primitivos-de-metricas-no-prometheus/), possui dois tipos mais complexos para monitorar m\u00E9tricas com mais nuances do que apenas contadores e medidas. Esses tipos s\u00E3o o **histograma** e o **sum\u00E1rio**. Eles s\u00E3o parecidos no sentido de que d\u00E1 para fazer certas an\u00E1lises em cima de ambos os tipos, mas possuem algumas diferen\u00E7as sut\u00EDs em que um pode ser melhor que o outro, a depender da situa\u00E7\u00E3o.\\n\\n\u003C!-- summary-break -->\\n\\n## \uD83D\uDCCA Histograma (histogram)\\n\\nQuem cursou alguma mat\u00E9ria de estat\u00EDstica deve lembrar (ou n\u00E3o) do que \u00E9 um histograma. Ele \u00E9 um **diagrama cuja \u00E1rea de cada barra e proporcional a frequ\u00EAncia de uma vari\u00E1vel** (a defini\u00E7\u00E3o \u00E9 maior do que isso, mas para o que vamos falar aqui \u00E9 suficiente).\\n\\nNo contexto do Prometheus, um histograma \u00E9 uma maneira de monitorar **observa\u00E7\u00F5es** de um evento. Mas um contador tamb\u00E9m \u00E9, e a\u00ED? A diferen\u00E7a \u00E9 que o histograma monitora a **distribui\u00E7\u00E3o de valores observados**. Para isso, ele recebe uma defini\u00E7\u00E3o de **intervalos** (chamados _buckets_). Cada intervalo vai gerar um **contador** separado, com uma dimens\u00E3o `le` (menor ou igual, em ingl\u00EAs _less than or equal_).\\n\\nSupondo que voc\u00EA tem uma m\u00E9trica de lat\u00EAncia de requisi\u00E7\u00F5es HTTP, e voc\u00EA quer monitorar monitorar qual o percentual destas requisi\u00E7\u00F5es duram at\u00E9 200 e at\u00E9 500 milissegundos. Um histograma com com dois intervalos (at\u00E9 200 ms e at\u00E9 500 ms) vai te dar essa resposta. Note que, na verdade, h\u00E1 tr\u00EAs intervalos pois automaticamente voc\u00EA vai ter um intervalo de **at\u00E9 infinito**, para registrar as ocorr\u00EAncias que n\u00E3o est\u00E3o dentro de nenhum dos intervalos que voc\u00EA definiu.\\n\\nDada uma distribui\u00E7\u00E3o de lat\u00EAncias com essas dura\u00E7\u00F5es, em milissegundos: `20, 30, 300, 200, 900, 500, 1200`, ter\u00EDamos as seguintes s\u00E9ries temporais:\\n\\n| M\u00E9trica                                           | Valor |\\n|---------------------------------------------------|:-----:|\\n| `http_request_duration_seconds_bucket{le=\\\"0.2\\\"}`  |   3   |\\n| `http_request_duration_seconds_bucket{le=\\\"0.5\\\"}`  |   5   |\\n| `http_request_duration_seconds_bucket{le=\\\"+Inf\\\"}` |   7   |\\n| `http_request_duration_seconds_sum`               | 3150  |\\n| `http_request_duration_seconds_count`             |   7   |\\n\\nNote que os intervalos s\u00E3o **cumulativos**. Assim, caso queiramos saber o percentual de requisi\u00E7\u00F5es que est\u00E1 abaixo de 500 ms, podemos pensar em fazer a query:\\n\\n```promql\\nhttp_request_duration_seconds_bucket{le=\\\"0.5\\\"}\\n/\\nhttp_request_duration_seconds_bucket{le=\\\"+Inf\\\"}\\n```\\n\\nNote que, na pr\u00E1tica, podemos ter v\u00E1rias **outras dimens\u00F5es** que podem ser agrupadas. Por exemplo, se uma dimens\u00E3o for o caminho da requisi\u00E7\u00E3o, a consulta acima vai retornar uma s\u00E9rie temporal para cada combina\u00E7\u00E3o de `le` e `path`. \\n\\n| M\u00E9trica                                                         | Valor |\\n|-----------------------------------------------------------------|:-----:|\\n| `http_request_duration_seconds_bucket{path=\\\"/\\\", le=\\\"0.2\\\"}`      |   3   |\\n| `http_request_duration_seconds_bucket{path=\\\"/\\\", le=\\\"0.5\\\"}`      |   5   |\\n| `http_request_duration_seconds_bucket{path=\\\"/\\\", le=\\\"+Inf\\\"}`     |   7   |\\n| `http_request_duration_seconds_sum{path=\\\"/\\\"}`                   | 3150  |\\n| `http_request_duration_seconds_count{path=\\\"/\\\"}`                 |   7   |\\n| `http_request_duration_seconds_bucket{path=\\\"/help\\\", le=\\\"0.2\\\"}`  |   2   |\\n| `http_request_duration_seconds_bucket{path=\\\"/help\\\", le=\\\"0.5\\\"}`  |  10   |\\n| `http_request_duration_seconds_bucket{path=\\\"/help\\\", le=\\\"+Inf\\\"}` |  18   |\\n| `http_request_duration_seconds_sum{path=\\\"/help\\\"}`               | 4125  |\\n| `http_request_duration_seconds_count{path=\\\"/help\\\"}`             |  18   |\\n\\nSe adicionarmos o c\u00F3digo de retorno, \u00E9 mais uma dimens\u00E3o para multiplicar a quantidade de s\u00E9ries temporais retornadas. Al\u00E9m disso, faz sentido olhar para essa m\u00E9trica numa **janela deslizante** (por exemplo, os \u00FAltimos 5 minutos). Do contr\u00E1rio, vamos analisar valores desde que a aplica\u00E7\u00E3o come\u00E7ou a rodar. Podemos agrupar com `sum` e analisar ao longo do tempo com `rate`.\\n\\n```promql\\nsum(rate(http_request_duration_seconds_bucket{le=\\\"0.5\\\"}[10m]))\\n/\\nsum(rate(http_request_duration_seconds_count[10m]))\\n```\\n\\nComo estamos agregando, podemos dividir tanto pelo _bucket_ de limite infinito como pela m\u00E9trica `_count`, pois o `sum` vai tirar as dimens\u00F5es. Se tent\u00E1ssemos usar o `_count` no primeiro exemplo, n\u00E3o iria funcionar pois essa m\u00E9trica n\u00E3o tem a dimens\u00E3o `le`, ent\u00E3o a divis\u00E3o n\u00E3o iria acontecer. O intervalo com limite infinito e a m\u00E9trica `_count` v\u00E3o ter sempre o mesmo valor.\\n\\n\\n## \uD83D\uDCC9 Sum\u00E1rio (summary)\\n\\nNo Prometheus, um sum\u00E1rio \u00E9 usado principalmente para **caulcular percentis** (voltando \u00E0 aula de estat\u00EDstica). Um percentil \u00E9 um valor que divide a popula\u00E7\u00E3o de acordo com a distribui\u00E7\u00E3o de valores de uma vari\u00E1vel. Em outras palavras, usamos percentis quando queremos saber **qual o maior valor que um percentual dos eventos tem**.\\n\\nUm percentil muito conhecido \u00E9 o percentil 50 (ou `p50`). Ele \u00E9 a **mediana** de um conjunto de valores. Dizer que a mediana, ou p50, de um conjunto \u00E9 10 significa que 50% dos valores \u00E9 menor ou igual a 10. O uso de percentis \u00E9 interessante pois, diferentemente da m\u00E9dia aritim\u00E9tica, os percentis descartam valores excepcionalmente discrepantes mais facilmente. \\n\\nEstes percentis s\u00E3o calculados do **cliente** (ou seja, na aplica\u00E7\u00E3o que est\u00E1 gerando as m\u00E9tricas) e s\u00E3o pr\u00E9-definidos por voc\u00EA. Para cada percentil escolhido, o cliente do Prometheus vai gerar uma m\u00E9trica com uma dimens\u00E3o `quantile` (variando de 0 a 1, inclusive). Usando poucas observa\u00E7\u00F5es \u00E9 mais chato dar um exemplo num\u00E9rico, mas as s\u00E9ries temporais geradas a partir de um sum\u00E1rio v\u00E3o parecer com essas, dada a escolha dos percentis 50, 90 e 95:\\n\\n| M\u00E9trica                                          | Valor |\\n|--------------------------------------------------|:-----:|\\n| `http_request_duration_seconds{quantile=\\\"0.5\\\"}`  |  50   |\\n| `http_request_duration_seconds{quantile=\\\"0.9\\\"}`  |  135  |\\n| `http_request_duration_seconds{quantile=\\\"0.95\\\"}` |  450  |\\n| `http_request_duration_seconds_sum`              | 72843 |\\n| `http_request_duration_seconds_count`            |  40   |\\n\\nNote que o sum\u00E1rio tamb\u00E9m exp\u00F5e duas m\u00E9tricas adicionais, `_sum` e `_count`. Com elas, assim como nas do histograma, podemos calcular uma m\u00E9dia aritim\u00E9tica simples. J\u00E1 os percentis j\u00E1 est\u00E3o calculados, e n\u00E3o precisamos fazer nenhuma agrega\u00E7\u00E3o. Ali\u00E1s, n\u00E3o s\u00F3 n\u00E3o precisamos como **n\u00E3o podemos**.\\n\\nDeixa eu dizer mais alto pra galera l\u00E1 atr\u00E1s: **n\u00E3o podemos agregar percentis**. [Agrega\u00E7\u00F5es de percentis n\u00E3o t\u00EAm significado](https://latencytipoftheday.blogspot.de/2014/06/latencytipoftheday-you-cant-average.html). Isso quer dizer que, ao utilizar um sum\u00E1rio (que nos d\u00E1 percentis), n\u00F3s n\u00E3o podemos somar, tirar alguma outra m\u00E9dia (aritim\u00E9tica ou at\u00E9 outro percentil), e por a\u00ED vai. **N\u00E3o sucumba \u00E0 tenta\u00E7\u00E3o.**\\n\\nIsso tamb\u00E9m implica nossas m\u00E9tricas precisarem ser geradas apenas com as dimens\u00F5es necess\u00E1rias desde o in\u00EDcio, pois na hora da consulta n\u00E3o podemos juntar os percentis, por exemplo, de todos os c\u00F3digos de resposta numa m\u00E9trica de percentil s\u00F3. Se queremos analisar essa m\u00E9trica deste jeito, o cliente (nossa aplica\u00E7\u00E3o) deve report\u00E1-la sem separar por esta dimens\u00E3o.\\n\\nE se voc\u00EA quiser ter mais flexibilidade? Podemos calcular percentis com um outro tipo de m\u00E9trica no Prometheus. E voc\u00EA j\u00E1 conhece ela.\\n\\n## \uD83D\uDCCA Histograma 2: O Inimigo Agora \u00E9 Outro\\n\\nOs histogramas podem ser usados para estimar, de maneira razoavel, percentis **em tempo de consulta**. Ou seja, podemos usar as s\u00E9ries temporais de uma m\u00E9trica do tipo histograma para calcular uma s\u00E9rie temporal que representa um percentil. \\n\\nO Prometheus tem uma fun\u00E7\u00E3o para isso, a `histogram_quantile`. Ela recebe um histograma (ou seja, uma lista de s\u00E9ries temporais com a dimens\u00E3o `le`) e um quantil (um n\u00FAmero de 0 a 1, inclusive, como no sum\u00E1rio). Usando as m\u00E9tricas do primeiro exemplo com histograma, podemos fazer uma consulta do `p90` considerando uma janela de 10 minutos assim:\\n\\n```promql\\nhistogram_quantile(0.9, rate(http_request_duration_seconds_bucket[10m])\\n```\\n\\nO exemplo acima n\u00E3o tem uma agrega\u00E7\u00E3o, como somar os intervalos. Para agrupar todas as dimens\u00F5es, podemos usar o `sum` novamente. Por\u00E9m, dessa vez, precisamos **manter o agrupamento por intervalo (`le`)**. Do contr\u00E1rio, a fun\u00E7\u00E3o `histogram_quantile` n\u00E3o vai funcionar.\\n\\n```promql\\nhistogram_quantile(0.9, sum(rate(http_request_duration_seconds_bucket[10m]) by (le))\\n```\\n\\nCaso queiramos ter mais de um percentil com mesmo valor retornado, separado por uma dimens\u00E3o espec\u00EDfica (por exemplo, `status_code`), podemos adicion\u00E1-lo no agrupamento com o `le`.\\n\\n```promql\\nhistogram_quantile(0.9, sum(rate(http_request_duration_seconds_bucket[10m]) by (status_code, le))\\n```\\n\\n\u00C9 importante ressaltar que os percentis que temos aqui s\u00E3o **aproximados**. No caso dos calculados a partir do histograma, a qualidade da aproxima\u00E7\u00E3o depende da escolha dos intervalos. O ideal \u00E9 que os intervalos consigam representar bem a distribui\u00E7\u00E3o dos valores. Se todas as observa\u00E7\u00F5es ca\u00EDrem em um _bucket_ s\u00F3, o c\u00E1lculo do percentil n\u00E3o vai ser realista. \\n\\nDito isso, faz se voc\u00EA quer agregar os dados e calcular percentis diferentes em tempo de consulta, **histogramas s\u00E3o a \u00FAnica maneira v\u00E1lida**. Do contr\u00E1rio, histograma e sum\u00E1rio funcionam. Se voc\u00EA consegue estimar valores para os intervalos do histograma que representam bem a poss\u00EDvel distribui\u00E7\u00E3o dos valores observados, use um histograma pois voc\u00EA tem bem mais flexibilidade para criar consultas e alertas sem mexer na aplica\u00E7\u00E3o. Se voc\u00EA precisa de percentis mais precisos, e pode definir em quais percentis tem interesse a nivel da aplica\u00E7\u00E3o, o sum\u00E1rio vai te servir bem.\\n\\nA documenta\u00E7\u00E3o do Prometheus tem uma [p\u00E1gina dedicada a histogramas e sum\u00E1rios](https://prometheus.io/docs/practices/histograms/) que fala bastante sobre o que a gente viu aqui. Caso queira ler mais sobre as diferen\u00E7as entre essas m\u00E9tricas, ela \u00E9 um bom recurso!\\n\",\"readingTime\":7,\"summary\":\"O Prometheus, [al\u00E9m dos tipos primitivos de m\u00E9tricas](/tipos-primitivos-de-metricas-no-prometheus/), possui dois tipos mais complexos para monitorar m\u00E9tricas com mais nuances do que apenas contadores e medidas. Esses tipos s\u00E3o o **histograma** e o **sum\u00E1rio**. Eles s\u00E3o parecidos no sentido de que d\u00E1 para fazer certas an\u00E1lises em cima de ambos os tipos, mas possuem algumas diferen\u00E7as sut\u00EDs em que um pode ser melhor que o outro, a depender da situa\u00E7\u00E3o.\\n\\n\"}},\"path\":\"tipos-complexos-de-metricas-no-prometheus\",\"sharedData\":{},\"siteData\":{}}");</script><script defer="" type="text/javascript" src="/templates/vendors~__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.207edc50.js"></script><script defer="" type="text/javascript" src="/templates/__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.a04ea84b.js"></script><script defer="" type="text/javascript" src="/templates/__react_static_root__/src/containers/post.d8dd52db.js"></script><script defer="" type="text/javascript" src="/templates/vendors~main.272ae1d1.js"></script><script defer="" type="text/javascript" src="/main.f19d4c14.js"></script></body></html>