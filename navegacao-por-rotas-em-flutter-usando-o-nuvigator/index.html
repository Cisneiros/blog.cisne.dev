<!DOCTYPE html><html lang="pt-BR" class=" "><head><meta name="generator" content="React Static"/><title data-react-helmet="true">Navegação por rotas em Flutter usando o Nuvigator · Cisne.dev blog</title><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="Cisneiros"/><meta data-react-helmet="true" property="og:title" content="Navegação por rotas em Flutter usando o Nuvigator · Cisne.dev blog"/><meta data-react-helmet="true" property="og:image" content="https://blog.cisne.dev/navegacao-por-rotas-em-flutter-usando-o-nuvigator/social-image.png"/><meta data-react-helmet="true" name="twitter:title" content="Navegação por rotas em Flutter usando o Nuvigator · Cisne.dev blog"/><meta data-react-helmet="true" name="twitter:image" content="https://blog.cisne.dev/navegacao-por-rotas-em-flutter-usando-o-nuvigator/social-image.png"/><link rel="preload" as="script" href="/templates/vendors~__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.207edc50.js"/><link rel="preload" as="script" href="/templates/__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.a04ea84b.js"/><link rel="preload" as="script" href="/templates/__react_static_root__/src/containers/post.d8dd52db.js"/><link rel="preload" as="script" href="/templates/vendors~main.272ae1d1.js"/><link rel="preload" as="script" href="/main.f19d4c14.js"/><link data-react-helmet="true" rel="stylesheet" href="//unpkg.com/dracula-prism/dist/css/dracula-prism.min.css"/><style data-styled="" data-styled-version="5.1.1">.CfxHf{max-width:960px;margin:0 auto;position:relative;}/*!sc*/
data-styled.g1[id="ui__Fit-prwz6b-0"]{content:"CfxHf,"}/*!sc*/
.iuDFSN{padding:1rem;color:var(--color-mid);text-align:center;font-size:1.5rem;}/*!sc*/
.iuDFSN a,.iuDFSN a:hover{-webkit-text-decoration:none;text-decoration:none;color:inherit;}/*!sc*/
data-styled.g2[id="Navigation__Container-sc-1yk0pqp-0"]{content:"iuDFSN,"}/*!sc*/
.izuwCZ{max-width:960px;margin:0 auto;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g3[id="Navigation__NavFit-sc-1yk0pqp-1"]{content:"izuwCZ,"}/*!sc*/
.TctaC{width:2.5rem;height:1.2em;overflow:hidden;--default-rotation:-180deg;}/*!sc*/
@media (prefers-color-scheme:dark){.TctaC{--default-rotation:0;}}/*!sc*/
data-styled.g4[id="Navigation__BrightnessContainer-sc-1yk0pqp-2"]{content:"TctaC,"}/*!sc*/
.sLeDt{-webkit-transform:rotate(var(--default-rotation));-ms-transform:rotate(var(--default-rotation));transform:rotate(var(--default-rotation));-webkit-transition:-webkit-transform 0.3s ease-out;-webkit-transition:transform 0.3s ease-out;transition:transform 0.3s ease-out;}/*!sc*/
html.light .sLeDt{-webkit-transform:rotate(-180deg);-ms-transform:rotate(-180deg);transform:rotate(-180deg);}/*!sc*/
html.dark .sLeDt{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}/*!sc*/
data-styled.g5[id="Navigation__BrightnessSpinner-sc-1yk0pqp-3"]{content:"sLeDt,"}/*!sc*/
.frsARl{background:none;border:none;cursor:pointer;}/*!sc*/
.frsARl:last-child{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}/*!sc*/
data-styled.g7[id="Navigation__BrightnessIcon-sc-1yk0pqp-5"]{content:"frsARl,"}/*!sc*/
.gdHjSq{margin-top:3rem;padding:1rem;background:var(--color-foreground);color:var(--color-background);}/*!sc*/
.gdHjSq a{color:var(--text-inverse-color-1);}/*!sc*/
.gdHjSq a:hover{color:var(--text-inverse-color-3);}/*!sc*/
data-styled.g8[id="Footer__Container-b3q04c-0"]{content:"gdHjSq,"}/*!sc*/
.layJcq{max-width:960px;margin:0 auto;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g9[id="Footer__FooterFit-b3q04c-1"]{content:"layJcq,"}/*!sc*/
*{box-sizing:border-box;margin:0;padding:0;border:0;font-size:inherit;font-weight:inherit;font-style:inherit;}/*!sc*/
:root{--color-1:#12c2e9;--color-2:#c471ed;--color-3:#f64f59;--color-1-darker:#0A7B94;--color-2-darker:#AE3CE7;--color-3-darker:#E90C1B;--color-light:#fefefe;--color-dark:#030303;--color-mid-dark:#747481;--color-mid-light:#818181;--font-weight-light:300;--font-weight-regular:400;--font-weight-heavy:500;--font-family-light:"HelveticaNeue-Light","Helvetica Neue Light",'Helvetica Neue',sans-serif;--font-family:'Helvetica Neue',sans-serif;}/*!sc*/
strong,h1,h2,h3,h4,h5,h6{font-family:var(--font-family);}/*!sc*/
html{font-family:var(--font-family-light);font-size:20px;line-height:1;color:var(--color-foreground);background-color:var(--color-background);text-rendering:optimizeLegibility;}/*!sc*/
@media (max-width:600px){html{font-size:16px;}}/*!sc*/
html,html.light{--color-background:var(--color-light);--color-foreground:var(--color-dark);--color-mid:var(--color-mid-dark);--text-color-1:var(--color-1-darker);--text-color-2:var(--color-2-darker);--text-color-3:var(--color-3-darker);--text-inverse-color-1:var(--color-1);--text-inverse-color-2:var(--color-2);--text-inverse-color-3:var(--color-3);}/*!sc*/
html.dark{--color-background:var(--color-dark);--color-foreground:var(--color-light);--color-mid:var(--color-mid-light);--text-color-1:var(--color-1);--text-color-2:var(--color-2);--text-color-3:var(--color-3);--text-inverse-color-1:var(--color-1-darker);--text-inverse-color-2:var(--color-2-darker);--text-inverse-color-3:var(--color-3-darker);}/*!sc*/
@media (prefers-color-scheme:dark){html{--color-background:var(--color-dark);--color-foreground:var(--color-light);--color-mid:var(--color-mid-light);}}/*!sc*/
body{font-size:1em;font-weight:var(--font-weight-light);}/*!sc*/
strong{font-weight:var(--font-weight-heavy);}/*!sc*/
em{font-style:italic;}/*!sc*/
main{padding:1rem;}/*!sc*/
hr{width:30%;margin:4rem auto;border:none;border-bottom:dotted 1px var(--color-1);}/*!sc*/
.pagination{text-align:center;}/*!sc*/
.pagination a{color:var(--text-color-1);}/*!sc*/
.pagination a:hover{color:var(--text-color-3);}/*!sc*/
a{color:var(--text-color-1);-webkit-text-decoration-color:#c471ed80;text-decoration-color:#c471ed80;-webkit-text-decoration-style:wavy;text-decoration-style:wavy;}/*!sc*/
a:hover{color:var(--text-color-3);-webkit-text-decoration-color:#12c2e980;text-decoration-color:#12c2e980;}/*!sc*/
.phone-mockup{max-width:15rem;margin:0 auto 1rem;position:relative;}/*!sc*/
.phone-mockup::before{content:'';width:100%;height:100%;position:absolute;pointer-events:none;background:url(/iphone-11-pro.png) no-repeat;background-size:contain;}/*!sc*/
.phone-mockup video,.phone-mockup img{width:100%;padding:9.3%;}/*!sc*/
data-styled.g14[id="sc-global-hFBrmQ1"]{content:"sc-global-hFBrmQ1,"}/*!sc*/
.tuaWG{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
@media (max-width:600px){.tuaWG{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}/*!sc*/
data-styled.g23[id="Poststyles__AfterPost-sc-12qb97v-0"]{content:"tuaWG,"}/*!sc*/
.gkeqUt{-webkit-flex:1;-ms-flex:1;flex:1;}/*!sc*/
@media (max-width:600px){.gkeqUt{text-align:center;margin-bottom:1rem;}}/*!sc*/
data-styled.g24[id="Poststyles__AfterPostChild-sc-12qb97v-1"]{content:"gkeqUt,"}/*!sc*/
.fAvgXR{-webkit-flex:1;-ms-flex:1;flex:1;text-align:right;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}/*!sc*/
@media (max-width:600px){.fAvgXR{text-align:center;margin-bottom:1rem;}}/*!sc*/
data-styled.g25[id="Poststyles__Tags-sc-12qb97v-2"]{content:"fAvgXR,"}/*!sc*/
.kSZCZX::before{content:' #';color:var(--color-mid);}/*!sc*/
data-styled.g26[id="Poststyles__Tag-sc-12qb97v-3"]{content:"kSZCZX,"}/*!sc*/
.kyWzPB{-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto;}/*!sc*/
data-styled.g27[id="Poststyles__Container-sc-12qb97v-4"]{content:"kyWzPB,"}/*!sc*/
.hhBwVH{font-size:5rem;font-weight:var(--font-weight-regular);line-height:0.8;background:linear-gradient(var(--color-1),var(--color-2),var(--color-3));-webkit-text-fill-color:transparent;background-clip:text;-webkit-background-clip:text;padding-bottom:1rem;margin:1rem 0;}/*!sc*/
html.rainbow .hhBwVH{background-image:linear-gradient(124deg,#ff2400,#e81d1d,#e8b71d,#e3e81d,#1de840,#1ddde8,#2b1de8,#dd00f3,#dd00f3);-webkit-animation:hTUzwZ 9s ease infinite;animation:hTUzwZ 9s ease infinite;background-size:450% 450%;}/*!sc*/
@media (max-width:600px){.hhBwVH{font-size:3.5rem;}}/*!sc*/
.hhBwVH a{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g28[id="Poststyles__Title-sc-12qb97v-5"]{content:"hhBwVH,"}/*!sc*/
.fonWHZ{color:var(--color-mid);text-align:center;margin-bottom:2rem;}/*!sc*/
data-styled.g29[id="Poststyles__Meta-sc-12qb97v-6"]{content:"fonWHZ,"}/*!sc*/
.jhgzPU{line-height:1.6;}/*!sc*/
.jhgzPU h2{font-size:2.5rem;}/*!sc*/
.jhgzPU h3{font-size:2rem;}/*!sc*/
.jhgzPU h4{font-size:1.5rem;}/*!sc*/
.jhgzPU h2,.jhgzPU h3,.jhgzPU h4,.jhgzPU h5,.jhgzPU h6{-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto;font-weight:var(--font-weight-regular);line-height:0.8;padding-bottom:1rem;margin-top:2rem;}/*!sc*/
.jhgzPU img{max-width:100%;}/*!sc*/
.jhgzPU pre.refractor{margin-top:0;margin-left:0;padding-left:1rem;border-left:solid 0.25rem var(--color-1);border-radius:0;font-size:0.8rem;overflow-wrap:normal;overflow-x:auto;background-color:var(--color-dark);color:var(--color-light);padding-top:0.5rem;padding-bottom:0.5rem;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}/*!sc*/
.jhgzPU pre.refractor::-webkit-scrollbar{width:0.25rem;height:0.25rem;}/*!sc*/
.jhgzPU pre.refractor code,.jhgzPU code{font-family:'Fira Code','Menlo',monospace;}/*!sc*/
.jhgzPU p code{color:var(--text-color-3);}/*!sc*/
.jhgzPU p code,.jhgzPU h1 code,.jhgzPU h2 code,.jhgzPU h3 code,.jhgzPU h4 code,.jhgzPU h5 code,.jhgzPU h6 code{font-size:0.9em;}/*!sc*/
.jhgzPU p,.jhgzPU pre,.jhgzPU ul,.jhgzPU ol,.jhgzPU table,.jhgzPU blockquote,.jhgzPU .live-code-container{margin-bottom:1rem;}/*!sc*/
.jhgzPU twitter-widget{margin-bottom:1rem !important;}/*!sc*/
.jhgzPU p:last-child,.jhgzPU pre:last-child,.jhgzPU ul:last-child,.jhgzPU ol:last-child,.jhgzPU table:last-child,.jhgzPU blockquote:last-child,.jhgzPU .live-code-container:last-child{margin-bottom:0;}/*!sc*/
.jhgzPU ul,.jhgzPU ol{list-style:none;margin-left:1rem;counter-reset:li;}/*!sc*/
.jhgzPU li{counter-increment:li;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
.jhgzPU ul li::before{content:'•';margin-right:0.5rem;color:var(--color-2);}/*!sc*/
.jhgzPU ol li::before{content:"."counter(li);margin-right:0.5rem;color:var(--color-2);font-weight:var(--font-weight-regular);width:1em;display:inline-block;margin-left:-0.5em;margin-right:0.5em;text-align:right;direction:rtl;}/*!sc*/
.jhgzPU table{margin-left:auto;margin-right:auto;border-spacing:0;font-size:0.9em;}/*!sc*/
.jhgzPU td,.jhgzPU th{border-bottom:solid 1px var(--color-2);padding:0.5rem;}/*!sc*/
.jhgzPU th{font-weight:var(--font-weight-heavy);}/*!sc*/
.jhgzPU tr:hover{background:var(--color-2);}/*!sc*/
.jhgzPU tr:last-of-type td{border-bottom:0;}/*!sc*/
.jhgzPU blockquote{padding-left:1rem;border-left:solid 0.25rem var(--color-3);color:var(--color-mid);}/*!sc*/
data-styled.g30[id="Poststyles__Content-sc-12qb97v-7"]{content:"jhgzPU,"}/*!sc*/
.jjKdZc{position:fixed;top:0;left:0;right:0;height:0.25rem;background-color:var(--color-1);-webkit-transition:opacity 0.25s ease-out;transition:opacity 0.25s ease-out;z-index:2;}/*!sc*/
data-styled.g31[id="post__ScrollTrackerContainer-gh0jqu-0"]{content:"jjKdZc,"}/*!sc*/
@-webkit-keyframes hTUzwZ{0%{background-position:0% 82%;}50%{background-position:100% 19%;}100%{background-position:0% 82%;}}/*!sc*/
@keyframes hTUzwZ{0%{background-position:0% 82%;}50%{background-position:100% 19%;}100%{background-position:0% 82%;}}/*!sc*/
data-styled.g32[id="sc-keyframes-hTUzwZ"]{content:"hTUzwZ,"}/*!sc*/
</style><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed.xml"/></head><body><div id="root"><nav class="Navigation__Container-sc-1yk0pqp-0 iuDFSN"><div class="ui__Fit-prwz6b-0 Navigation__NavFit-sc-1yk0pqp-1 izuwCZ"><p class="logo"><a href="/">Cisne.dev blog</a></p><div class="Navigation__BrightnessContainer-sc-1yk0pqp-2 TctaC"><div class="Navigation__BrightnessSpinner-sc-1yk0pqp-3 sLeDt"><button title="Mudar para modo diurno" aria-label="Mudar para modo diurno" class="Navigation__ClearButton-sc-1yk0pqp-4 Navigation__BrightnessIcon-sc-1yk0pqp-5 frsARl">🌙</button><button title="Mudar para modo noturno" aria-label="Mudar para modo noturno" class="Navigation__ClearButton-sc-1yk0pqp-4 Navigation__BrightnessIcon-sc-1yk0pqp-5 frsARl">☀️</button></div></div></div></nav><main><div class="ui__Fit-prwz6b-0 CfxHf"><div><div style="width:0%;opacity:0" class="post__ScrollTrackerContainer-gh0jqu-0 jjKdZc"></div><article class="Poststyles__Container-sc-12qb97v-4 kyWzPB"><h1 class="Poststyles__Title-sc-12qb97v-5 hhBwVH"><a href="/navegacao-por-rotas-em-flutter-usando-o-nuvigator/">Navegação por rotas em Flutter usando o Nuvigator</a></h1><p class="Poststyles__Meta-sc-12qb97v-6 fonWHZ">Publicado em <!-- -->12 ago 2020<!-- -->. Uns <!-- -->12<!-- --> minutos de leitura.</p><div class="Poststyles__Content-sc-12qb97v-7 jhgzPU content"><p>Um dos aspectos mais importantes de um app é a <strong>navegação entre telas</strong>. Na web, isso é feito através de links (e, com a alta dos frameworks de front-end JavaScript, reimplementando esta navegação no cliente). Num app em Flutter, existem funções de navegação para transicionar de uma tela para outra. Com elas é possível empilhar, substituir e remover telas criando o próprio widget da tela seguinte nestas funções.</p><p>O <strong>Nuvigator</strong> surgiu como uma abstração em cima desse roteamento do Flutter para facilitar a declaração e reutilização destas rotas, o que é bem útil conforme o app cresce e tem mais partes que interagem. Trouxe uma introdução a como ele funciona neste post!</p><span><!-- summary-break --></span><p>O <a href="https://github.com/nubank/nuvigator">Nuvigator</a> é uma biblioteca open source, criada no Nubank, para facilitar a declaração de rotas e a navegação entre elas em Flutter. Foi usada inicialmente em algumas seções do app, moldada para facilitar o fluxo de desenvolvimento de navegação. Eventualmente, ela chegou a um ponto que pode ser aberta para o público e beneficiar a comunidade desenvolvedora. </p><h2>Navegação em Fluter 101</h2><p>Vamos dar uma olhada em como funciona uma navegação básica em Flutter, seguindo os <a href="https://flutter.dev/docs/cookbook/navigation/navigation-basics">exemplos da documentação</a>, para depois entender no que o Nuvigator pode ajudar. No exemplo original, ele cria widgets como <code>FirstRoute</code>. Como vamos introduzir alguns widgets de rotas mais tarde, estou chamando de <code>FirstScreen</code> para facilitar. Além disso, adicionei um argumento que a segunda tela recebe.</p><pre class="refractor language-js"><code class="language-js"><span class="token comment">// first_screen.dart</span>

<span class="token keyword">class</span> <span class="token class-name">FirstScreen</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  @override
  Widget <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">BuildContext context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token operator">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span>
        title<span class="token operator">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&#x27;First Screen&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span> <span class="token function">Center</span><span class="token punctuation">(</span>
        child<span class="token operator">:</span> <span class="token function">RaisedButton</span><span class="token punctuation">(</span>
          child<span class="token operator">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&#x27;Open route&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          onPressed<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Navigator<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
              context<span class="token punctuation">,</span>
              <span class="token function">MaterialPageRoute</span><span class="token punctuation">(</span><span class="token function-variable function">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">SecondScreen</span><span class="token punctuation">(</span>magicNumber<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="refractor language-js"><code class="language-js"><span class="token comment">// second_screen.dart</span>
<span class="token keyword">class</span> <span class="token class-name">SecondScreen</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token function">SecondScreen</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>magicNumber<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  final int magicNumber<span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre><p>No exemplo acima, a partir da tela <code>FirstScreen</code>, é possível clicar num botão para abrir a tela <code>SecondScreen</code>. Como a tela de destino precisa receber algum parâmetro, ele pode ser passado direto no construtor do widget <code>SecondScreen</code>. Note também um widget <code>MaterialPageRoute</code>, usado para definir como a transição entre as telas vai acontecer. Se estivéssemos um app com a interface do iOS, usaríamos um <code>CupertinoPageRoute</code> no lugar.</p><p>Apesar de bastante simples, esse exemplo tem um problema que é o <strong>acoplamento das duas telas</strong>: a tela de origem precisa instanciar o widget da segunda tela, e para isso vai importar o arquivo em que ele for definido. Também está nela o <strong>tipo de rota</strong> (material, no caso). Caso fôssemos mudar o tipo de rota ou qual a tela de entrada no fluxo de destino, precisaríamos editar em todos os arquivos que possivelmente conseguem abrir esta rota.</p><p>Uma maneira de amenizar isso seria definir separadamente as rotas num arquivo que pode ser importado pelos widgets que querem navegar entre telas. Poderíamos ter um arquivo de navegação como este:</p><pre class="refractor language-js"><code class="language-js"><span class="token comment">// navigation.dart</span>

<span class="token function">toSecondRoute</span><span class="token punctuation">(</span><span class="token parameter">BuildContext context<span class="token punctuation">,</span> <span class="token punctuation">{</span>int magicNumber<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Navigator<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
    context<span class="token punctuation">,</span>
    <span class="token function">MaterialPageRoute</span><span class="token punctuation">(</span><span class="token function-variable function">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">SecondScreen</span><span class="token punctuation">(</span>magicNumber<span class="token operator">:</span> magicNumber<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="refractor language-js"><code class="language-js"><span class="token comment">// first_screen.dart</span>

<span class="token keyword">import</span> <span class="token string">&#x27;./navigation.dart&#x27;</span><span class="token punctuation">;</span>

<span class="token function">RaisedButton</span><span class="token punctuation">(</span>
  child<span class="token operator">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&#x27;Open route&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">toSecondRoute</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> magicNumber<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre><p>Com isso, isolamos nossa navegação da apresentação das telas. Se resolvermos mudar qual o widget que vai aparecer quando esta rota for chamada, só precisamos modificar na função <code>toSecondRoute</code> e todos que a importam vão apontar para o widget correto. </p><p>Uma outra maneira de separar estes widgets seria usar uma <strong>rota nomeada</strong> do Flutter. Ao declarar a aplicação, podemos listar as rotas que ela possui assim:</p><pre class="refractor language-js"><code class="language-js"><span class="token comment">// main.dart</span>

<span class="token function">MaterialApp</span><span class="token punctuation">(</span>
  <span class="token comment">// A rota que o app vai carregar ao iniciar</span>
  initialRoute<span class="token operator">:</span> <span class="token string">&#x27;/&#x27;</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&#x27;/&#x27;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">FirstScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;/second&#x27;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">SecondScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="refractor language-js"><code class="language-js"><span class="token comment">// first_screen.dart</span>

<span class="token function">RaisedButton</span><span class="token punctuation">(</span>
  child<span class="token operator">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&#x27;Open route&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Navigator<span class="token punctuation">.</span><span class="token function">pushNamed</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">&#x27;/second&#x27;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span></code></pre><p>Esta maneira permite declarar rotas num formato parecido com um link e abrir estes links de qualquer lugar do app. Porém, criamos mais uma vez um acoplamento, dessa vez com a string <code>/second</code>. Ela estará escrita literalmente em todas as telas que quiserem acessar esta rota, e, ao contrário da função que usamos no exemplo anterior, não pode ser facilmente editada usando as ferramentas de refatoração que as principais IDEs de Flutter suportam, como Visual Studio Code ou IntelliJ. Poderíamos resolver este problema externalizando uma classe ou enum que seriam mapeados para as string, para reduzir este acoplamento.</p><p>Outra dificuldade que aparece ao usar rotas nomeadas é a passagem de parâmetros para elas. A documentação do Flutter tem um artigo só sobre <a href="https://flutter.dev/docs/cookbook/navigation/navigate-with-arguments">passagem de parâmetros para rotas nomeadas</a>, que envolve criar uma classe separada para os argumentos que a rota recebe e instanciar esta classe ao chamar a rota nomeada. Isso traz algumas questões por si só e, conforme a aplicação cresce, lidar com este boilerplate fica mais difícil.</p><h2>Entra o Nuvigator</h2><p>O Nuvigator não substitui o roteamento do Flutter, mas sim <strong>abstrai alguns conceitos</strong> dele, como a criação de funções para chamar cada rota, criação de classes de argumentos usadas de maneira transparentes e hierarquia de <em>deep links</em>, para permitir acesso direto a uma parte do app, como nas rotas nomeadas.</p><p>Para isso, o Nuvigator se vale de <strong>geração de código Dart</strong>. Por isso, dizemos que ele fornece uma API declarativa em que você define as rotas e o Nuvigator gera código para facilitar o uso delas.</p><blockquote><p>O Nuvigator estava na versão 0.6.0 quando este post foi escrito. Dependendo de quão do futuro você é, alguns conceitos ou exemplos abaixo podem estar desatualizados, pois o projeto está ativamente em desenvolvimento! 📈</p></blockquote><p>Vamos definir as rotas que vimos acima em termos de um <code>Router</code> do Nuvigator:</p><pre class="refractor language-js"><code class="language-js"><span class="token comment">// app_router.dart</span>

part <span class="token string">&#x27;app_router.g.dart&#x27;</span><span class="token punctuation">;</span>

@<span class="token function">NuRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">AppRouter</span> <span class="token keyword">extends</span> <span class="token class-name">Router</span> <span class="token punctuation">{</span>
  @<span class="token function">NuRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  ScreenRoute<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token function">firstScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">ScreenRoute</span><span class="token punctuation">(</span>
    <span class="token function-variable function">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">FirstScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>

  @<span class="token function">NuRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  ScreenRoute<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token function">secondScreen</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>int magicNumber<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">ScreenRoute</span><span class="token punctuation">(</span>
    <span class="token function-variable function">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">SecondScreen</span><span class="token punctuation">(</span>magicNumber<span class="token operator">:</span> magicNumber<span class="token punctuation">)</span>
  <span class="token punctuation">)</span>

  @override
  Map<span class="token operator">&lt;</span>RouteDef<span class="token punctuation">,</span> ScreenRouteBuilder<span class="token operator">&gt;</span> <span class="token keyword">get</span> <span class="token parameter">screensMap</span> <span class="token operator">=&gt;</span> _$screensMap<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>As classes <code>Router</code> e <code>ScreenRoute</code> do exemplo acima vêm do Nuvigator. Este exemplo é bem parecido com o segundo, em que criamos uma função para chamar a segunda tela. As diferenças são que, neste caso, estas funções são métodos de uma classe nova <code>AppRouter</code> que criamos, e que elas estão anotadas com <code>@NuRoute</code>. Estas anotações servem para indicar ao Nuvigator que cada função destas é uma rota, e que ele deve gerar o código necessário para que ela funcione. Além disso, há um getter <code>screensMap</code>, que vai ser usado pelo código gerado, também. Eu aproveitei já e criei uma rota para a primeira tela.</p><p>Enfim, adicionamos o Nuvigator no nosso app:</p><pre class="refractor language-js"><code class="language-js"><span class="token comment">// main.dart</span>

<span class="token function">MaterialApp</span><span class="token punctuation">(</span>
  builder<span class="token operator">:</span> <span class="token function">Nuvigator</span><span class="token punctuation">(</span>
    router<span class="token operator">:</span> <span class="token function">AppRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// O Router que criamos acima</span>
    screenType<span class="token operator">:</span> materialScreenType<span class="token punctuation">,</span> <span class="token comment">// O tipo de rota padrão</span>
    initialRoute<span class="token operator">:</span> AppRoutes<span class="token punctuation">.</span>firstScreen<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span> 
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>O widget <code>Nuvigator</code> recebe um <code>Router</code> e toma conta de lidar com a navegação a partir de agora. Uma outra classe é gerada a partir do nosso <code>AppRouter</code> que é a <code>AppRoutes</code>. Usamos ela no exemplo acima para especificar a rota inicial sem usar uma string diretamente no código.</p><p>Eu falei algumas vezes sobre <strong>gerar código</strong>. Isso funciona usando um pacote chamado <a href="">build_runner</a>. Ele adiciona um comando que podemos executar no projeto que vai escanear o código fonte da nossa aplicação e gerar código adicional de acordo com os pacotes que suportem essa função. É para isso que as anotações servem. No topo do arquivo, colocamos uma diretriz <code>part</code>. Ela serve para dizer que há outro arquivo que estende a funcionalidade deste. Esse arquivo ainda não existe, mas vai ser gerado ao rodar o comando abaixo:</p><pre class="refractor language-html"><code class="language-html">$ flutter pub run build_runner build --delete-conflicting-outputs</code></pre><p>Neste exemplo, o Nuvigator vai gerar funções para abrir cada rota. Essas rotas, por padrão, vão abrir como um <code>push</code> (como nos primeiros exemplo), mas há suporte para definir múltiplas maneiras de abrir uma rota e o Nuvigator gerará um método para cada uma, como <code>pushReplacement</code> por exemplo. Nosso widget da primeira tela poderia buscar o Nuvigator no contexto para ter acesso a essas funções, mas como ele já é criado dentro da classe do nuvigator, podemos passar as funções de navegação que o widget precisa como argumentos no seu construtor, e deixando o widget totalmente desacoplado da navegação.</p><pre class="refractor language-js"><code class="language-js"><span class="token comment">// app_router.dart </span>

@<span class="token function">NuRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ScreenRoute<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token function">firstScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">ScreenRoute</span><span class="token punctuation">(</span>
  <span class="token function-variable function">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">FirstScreen</span><span class="token punctuation">(</span>
    <span class="token comment">// A função `toSecondScreen` é gerada automaticamente usando o</span>
    <span class="token comment">// tipo de rota padrão, `push`</span>
    toSecondScreen<span class="token operator">:</span> toSecondScreen<span class="token punctuation">,</span> 
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre><pre class="refractor language-js"><code class="language-js"><span class="token comment">// first_screen.dart</span>

<span class="token keyword">class</span> <span class="token class-name">FirstScreen</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token function">FirstScreen</span><span class="token punctuation">(</span><span class="token punctuation">{</span>@required <span class="token keyword">this</span><span class="token punctuation">.</span>toSecondScreen<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  final <span class="token function">Function</span><span class="token punctuation">(</span><span class="token punctuation">{</span>int magicNumber<span class="token punctuation">}</span><span class="token punctuation">)</span> toSecondScreen<span class="token punctuation">;</span>

  @override
  Widget <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">BuildContext context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token operator">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span>
        title<span class="token operator">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&#x27;First Screen&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span> <span class="token function">Center</span><span class="token punctuation">(</span>
        child<span class="token operator">:</span> <span class="token function">RaisedButton</span><span class="token punctuation">(</span>
          child<span class="token operator">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&#x27;Open route&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function-variable function">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">toSecondScreen</span><span class="token punctuation">(</span>magicNumber<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Passando a função de navegação para o widget, ao invés de acessá-la diretamente nele, nos permite fazer testes unitários deste widget sem necessidade de navegação. Por exemplo, podemos passar uma implementação que atualiza uma variável local no teste e verificamos se, ao tocar no botão, essa variável foi atualizada.</p><p>É possível também acessar a segunda rota a partir de um deep link ao invés de passar a função para o widget. Para isso, precisamos nomeá-la. Na implementação de deep links do Nuvigator, é possível passar argumentos tanto como parte do path como via query string, sem configuração adicional na rota. O gerador de código verifica o nome dos argumentos que a rota recebe e sabe tratar automaticamente, inclusive convertendo para o tipo final (<code>int</code> neste caso) para alguns tipos simples como <code>String</code>, <code>int</code>, <code>double</code>, <code>bool</code> e <code>DateTime</code> a partir da versão 0.6.0. </p><pre class="refractor language-js"><code class="language-js"><span class="token comment">// app_router.dart</span>

@<span class="token function">NuRoute</span><span class="token punctuation">(</span>deepLink<span class="token operator">:</span> <span class="token string">&#x27;/second&#x27;</span><span class="token punctuation">)</span> <span class="token comment">// Adicionamos o link para esta rota</span>
ScreenRoute<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token function">secondScreen</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>int magicNumber<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">ScreenRoute</span><span class="token punctuation">(</span>
  <span class="token function-variable function">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">FirstScreen</span><span class="token punctuation">(</span>magicNumber<span class="token operator">:</span> magicNumber<span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre><pre class="refractor language-js"><code class="language-js"><span class="token comment">// first_screen.dart</span>

<span class="token keyword">class</span> <span class="token class-name">FirstScreen</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  @override
  Widget <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">BuildContext context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
      appBar<span class="token operator">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span>
        title<span class="token operator">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&#x27;First Screen&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span> <span class="token function">Center</span><span class="token punctuation">(</span>
        child<span class="token operator">:</span> <span class="token function">RaisedButton</span><span class="token punctuation">(</span>
          child<span class="token operator">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&#x27;Open route&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token function-variable function">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
            Nuvigator<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">openDeepLink</span><span class="token punctuation">(</span>Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&#x27;/second?magicNumber=42&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>O uso de deep links pode gerar algum acomplamento se eles ficarem espalhados pela aplicação, mas é bem útil para, por exemplo, definir no back-end da aplicação qual rota abrir. O app recebe a string do deep link e pode abri-lo a partir de alguma interação do usuário. Esse comportamento é particularmente interessante em BFFs (back-ends for front-ends).</p><p>Em algumas situações, você pode querer navegar para um <strong>fluxo</strong> ao invés de uma tela. Um fluxo é uma sequência de telas que são agrupadas entre si e que, em algum momento (usualmente no fim do fluxo), você pode fechar todas elas de uma vez só e voltar para onde estava antes de chamar o fluxo. O Nuvigator dá suporte a definição de fluxos através de <strong>Nuvigators aninhados</strong>, que é criar uma rota cujo widget é outro Nuvigator. Este é um trecho de código do app de exemplo no projeto do Nuvigator:</p><pre class="refractor language-js"><code class="language-js"><span class="token comment">// sample_router.dart (do app de exemplo do Nuvigator)</span>

@<span class="token function">NuRoute</span><span class="token punctuation">(</span>deepLink<span class="token operator">:</span> <span class="token string">&#x27;/friendRequests&#x27;</span><span class="token punctuation">)</span>
ScreenRoute<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token function">friendRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">ScreenRoute</span><span class="token punctuation">(</span>
      builder<span class="token operator">:</span> <span class="token function">Nuvigator</span><span class="token punctuation">(</span>
        router<span class="token operator">:</span> <span class="token function">FriendRequestRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        initialRoute<span class="token operator">:</span> FriendRequestRoutes<span class="token punctuation">.</span>listRequests<span class="token punctuation">,</span>
        screenType<span class="token operator">:</span> materialScreenType<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Neste caso, ao invés de retornar um widget para a rota <code>/friendRequest</code>, estamos retornando um novo Nuvigator com um novo Router. O Nuvigator consegue lidar com esse aninhamento e, caso alguma tela dentro do fluxo chame a função de navegação <code>closeFlow()</code>, provida pelo Nuvigator, ela vai fechar todas as telas que fazem parte do mesmo fluxo, voltando para onde o usuário estava antes de chamar o fluxo pela primeira vez. Para a tela que vai chamar o fluxo, nada muda. Ela apenas vai abrir uma rota via função ou via deep link. A rota inclusive pode receber argumentos, se necessário.</p><h2>O que eu ganho com isso?</h2><p>O Nuvigator foi feito para automatizar tarefas como a criação de boilerplate para definir rotas. Originalmente, esse trabalho é feito manualmente. Ele pode também não ser feito e o código de roteamento ficar espalhado pela aplicação.</p><p>Para apps pequenos com fluxos simples, os benefícios podem não parecer relevantes junto a introdução de geração de código, uma dependência nova e classes com anotações. Mas onde o Nuvigator brilha são em projetos maiores que têm multiplos fluxos, com suporte a Nuvigators e Routers aninhados, hierarquia de deep links, classes de argumentos autogeradas, criação de funções para diferentes tipos de roteamento para uma mesma tela, e gerenciamento de alguns comportamentos mais complicados de navegação.</p><p>Independente de usar o Nuvigator ou não, uma sugestão que deixo é definir <strong>algum padrão</strong> para navegação na aplicação. O Nuvigator, apesar de razoavelmente genérico, tem um pouco de opinião sobre como estruturar essa navegação, e essa abordagem pode ser útil ou não para o seu projeto.</p><h2>Quero saber mais!</h2><p>No repositório do Nuvigator, há um <a href="https://github.com/nubank/nuvigator/tree/master/example">projeto de exemplo</a> para demonstrar algumas dessas funcionalidades em uso. Inclusive, recentemente, eu subi um pull request para refatorar este projeto e facilitar o entendimento de cada demonstração. Nele há também exemplos de usos mais complexos como um Bloc envelopando todas as telas de um Nuvigator aninhado usando o pacote <a href="https://pub.dev/packages/provider">Provider</a> e a função <code>wrapper</code> do Nuvigator. Experimente executar o projeto num simulador e olhar o código-fonte dele.</p><p>O <a href="https://github.com/nubank/nuvigator/blob/master/README.md">Readme</a> do Nuvigator explica cada um dos conceitos que ele introduz com exemplos, também. Há uma sessão específica sobre geração de código que mostra quais classes e extensões são geradas e para que cada uma serve. Se algo não estiver claro, pode abrir uma issue no GitHub (em inglês ou em português) que alguém vai te ajudar!</p></div><hr/><div class="Poststyles__AfterPost-sc-12qb97v-0 tuaWG"><p class="Poststyles__AfterPostChild-sc-12qb97v-1 gkeqUt">Gostou? <a href="https://twitter.com/intent/tweet?text=%22Navega%C3%A7%C3%A3o%20por%20rotas%20em%20Flutter%20usando%20o%20Nuvigator%22%20por%20%40Cisneiros%0A%0Ahttps%3A%2F%2Fblog.cisne.dev%2Fnavegacao-por-rotas-em-flutter-usando-o-nuvigator" target="_blank" rel="noopener noreferrer">Que tal compartilhar?</a></p><p class="Poststyles__AfterPostChild-sc-12qb97v-1 Poststyles__Tags-sc-12qb97v-2 fAvgXR">Tags: <span class="Poststyles__Tag-sc-12qb97v-3 kSZCZX"><a href="/tag/flutter">flutter</a></span><span class="Poststyles__Tag-sc-12qb97v-3 kSZCZX"><a href="/tag/mobile">mobile</a></span></p></div></article></div></div></main><footer class="Footer__Container-b3q04c-0 gdHjSq"><div class="ui__Fit-prwz6b-0 Footer__FooterFit-b3q04c-1 layJcq"><p>© <a href="https://cisne.dev">Alexandre Cisneiros</a></p><p><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a></p></div></footer></div><script type="text/javascript">window.__routeInfo = JSON.parse("{\"template\":\"__react_static_root__/src/containers/post\",\"sharedHashesByProp\":{},\"data\":{\"postData\":{\"title\":\"Navega\u00E7\u00E3o por rotas em Flutter usando o Nuvigator\",\"date\":\"2020-08-12T00:00:00-03:00\",\"slug\":\"navegacao-por-rotas-em-flutter-usando-o-nuvigator\",\"tags\":[\"flutter\",\"mobile\"],\"filePath\":\"2020-08-12-navegacao-por-rotas-em-flutter-usando-o-nuvigator.md\",\"content\":\"Um dos aspectos mais importantes de um app \u00E9 a **navega\u00E7\u00E3o entre telas**. Na web, isso \u00E9 feito atrav\u00E9s de links (e, com a alta dos frameworks de front-end JavaScript, reimplementando esta navega\u00E7\u00E3o no cliente). Num app em Flutter, existem fun\u00E7\u00F5es de navega\u00E7\u00E3o para transicionar de uma tela para outra. Com elas \u00E9 poss\u00EDvel empilhar, substituir e remover telas criando o pr\u00F3prio widget da tela seguinte nestas fun\u00E7\u00F5es.\\n\\nO **Nuvigator** surgiu como uma abstra\u00E7\u00E3o em cima desse roteamento do Flutter para facilitar a declara\u00E7\u00E3o e reutiliza\u00E7\u00E3o destas rotas, o que \u00E9 bem \u00FAtil conforme o app cresce e tem mais partes que interagem. Trouxe uma introdu\u00E7\u00E3o a como ele funciona neste post!\\n\\n\u003C!-- summary-break -->\\n\\nO [Nuvigator](https://github.com/nubank/nuvigator) \u00E9 uma biblioteca open source, criada no Nubank, para facilitar a declara\u00E7\u00E3o de rotas e a navega\u00E7\u00E3o entre elas em Flutter. Foi usada inicialmente em algumas se\u00E7\u00F5es do app, moldada para facilitar o fluxo de desenvolvimento de navega\u00E7\u00E3o. Eventualmente, ela chegou a um ponto que pode ser aberta para o p\u00FAblico e beneficiar a comunidade desenvolvedora. \\n\\n## Navega\u00E7\u00E3o em Fluter 101\\n\\nVamos dar uma olhada em como funciona uma navega\u00E7\u00E3o b\u00E1sica em Flutter, seguindo os [exemplos da documenta\u00E7\u00E3o](https://flutter.dev/docs/cookbook/navigation/navigation-basics), para depois entender no que o Nuvigator pode ajudar. No exemplo original, ele cria widgets como `FirstRoute`. Como vamos introduzir alguns widgets de rotas mais tarde, estou chamando de `FirstScreen` para facilitar. Al\u00E9m disso, adicionei um argumento que a segunda tela recebe.\\n\\n```dart\\n// first_screen.dart\\n\\nclass FirstScreen extends StatelessWidget {\\n  @override\\n  Widget build(BuildContext context) {\\n    return Scaffold(\\n      appBar: AppBar(\\n        title: Text('First Screen'),\\n      ),\\n      body: Center(\\n        child: RaisedButton(\\n          child: Text('Open route'),\\n          onPressed: () {\\n            Navigator.push(\\n              context,\\n              MaterialPageRoute(builder: (context) => SecondScreen(magicNumber: 42)),\\n            );\\n          }\\n        ),\\n      ),\\n    );\\n  }\\n}\\n```\\n```dart\\n// second_screen.dart\\nclass SecondScreen extends StatelessWidget {\\n  SecondScreen({this.magicNumber});\\n\\n  final int magicNumber;\\n  // ...\\n}\\n```\\n\\nNo exemplo acima, a partir da tela `FirstScreen`, \u00E9 poss\u00EDvel clicar num bot\u00E3o para abrir a tela `SecondScreen`. Como a tela de destino precisa receber algum par\u00E2metro, ele pode ser passado direto no construtor do widget `SecondScreen`. Note tamb\u00E9m um widget `MaterialPageRoute`, usado para definir como a transi\u00E7\u00E3o entre as telas vai acontecer. Se estiv\u00E9ssemos um app com a interface do iOS, usar\u00EDamos um `CupertinoPageRoute` no lugar.\\n\\nApesar de bastante simples, esse exemplo tem um problema que \u00E9 o **acoplamento das duas telas**: a tela de origem precisa instanciar o widget da segunda tela, e para isso vai importar o arquivo em que ele for definido. Tamb\u00E9m est\u00E1 nela o **tipo de rota** (material, no caso). Caso f\u00F4ssemos mudar o tipo de rota ou qual a tela de entrada no fluxo de destino, precisar\u00EDamos editar em todos os arquivos que possivelmente conseguem abrir esta rota.\\n\\nUma maneira de amenizar isso seria definir separadamente as rotas num arquivo que pode ser importado pelos widgets que querem navegar entre telas. Poder\u00EDamos ter um arquivo de navega\u00E7\u00E3o como este:\\n\\n```dart\\n// navigation.dart\\n\\ntoSecondRoute(BuildContext context, {int magicNumber}) => Navigator.push(\\n    context,\\n    MaterialPageRoute(builder: (context) => SecondScreen(magicNumber: magicNumber)),\\n  );\\n```\\n```dart\\n// first_screen.dart\\n\\nimport './navigation.dart';\\n\\nRaisedButton(\\n  child: Text('Open route'),\\n  onPressed: () => toSecondRoute(context, magicNumber: 42)\\n),\\n```\\n\\nCom isso, isolamos nossa navega\u00E7\u00E3o da apresenta\u00E7\u00E3o das telas. Se resolvermos mudar qual o widget que vai aparecer quando esta rota for chamada, s\u00F3 precisamos modificar na fun\u00E7\u00E3o `toSecondRoute` e todos que a importam v\u00E3o apontar para o widget correto. \\n\\nUma outra maneira de separar estes widgets seria usar uma **rota nomeada** do Flutter. Ao declarar a aplica\u00E7\u00E3o, podemos listar as rotas que ela possui assim:\\n\\n```dart\\n// main.dart\\n\\nMaterialApp(\\n  // A rota que o app vai carregar ao iniciar\\n  initialRoute: '/',\\n  routes: {\\n    '/': (context) => FirstScreen(),\\n    '/second': (context) => SecondScreen(),\\n  },\\n);\\n```\\n```dart\\n// first_screen.dart\\n\\nRaisedButton(\\n  child: Text('Open route'),\\n  onPressed: () => Navigator.pushNamed(context, '/second')\\n),\\n```\\n\\nEsta maneira permite declarar rotas num formato parecido com um link e abrir estes links de qualquer lugar do app. Por\u00E9m, criamos mais uma vez um acoplamento, dessa vez com a string `/second`. Ela estar\u00E1 escrita literalmente em todas as telas que quiserem acessar esta rota, e, ao contr\u00E1rio da fun\u00E7\u00E3o que usamos no exemplo anterior, n\u00E3o pode ser facilmente editada usando as ferramentas de refatora\u00E7\u00E3o que as principais IDEs de Flutter suportam, como Visual Studio Code ou IntelliJ. Poder\u00EDamos resolver este problema externalizando uma classe ou enum que seriam mapeados para as string, para reduzir este acoplamento.\\n\\nOutra dificuldade que aparece ao usar rotas nomeadas \u00E9 a passagem de par\u00E2metros para elas. A documenta\u00E7\u00E3o do Flutter tem um artigo s\u00F3 sobre [passagem de par\u00E2metros para rotas nomeadas](https://flutter.dev/docs/cookbook/navigation/navigate-with-arguments), que envolve criar uma classe separada para os argumentos que a rota recebe e instanciar esta classe ao chamar a rota nomeada. Isso traz algumas quest\u00F5es por si s\u00F3 e, conforme a aplica\u00E7\u00E3o cresce, lidar com este boilerplate fica mais dif\u00EDcil.\\n\\n## Entra o Nuvigator\\n\\nO Nuvigator n\u00E3o substitui o roteamento do Flutter, mas sim **abstrai alguns conceitos** dele, como a cria\u00E7\u00E3o de fun\u00E7\u00F5es para chamar cada rota, cria\u00E7\u00E3o de classes de argumentos usadas de maneira transparentes e hierarquia de _deep links_, para permitir acesso direto a uma parte do app, como nas rotas nomeadas.\\n\\nPara isso, o Nuvigator se vale de **gera\u00E7\u00E3o de c\u00F3digo Dart**. Por isso, dizemos que ele fornece uma API declarativa em que voc\u00EA define as rotas e o Nuvigator gera c\u00F3digo para facilitar o uso delas.\\n\\n> O Nuvigator estava na vers\u00E3o 0.6.0 quando este post foi escrito. Dependendo de qu\u00E3o do futuro voc\u00EA \u00E9, alguns conceitos ou exemplos abaixo podem estar desatualizados, pois o projeto est\u00E1 ativamente em desenvolvimento! \uD83D\uDCC8\\n\\nVamos definir as rotas que vimos acima em termos de um `Router` do Nuvigator:\\n\\n```dart\\n// app_router.dart\\n\\npart 'app_router.g.dart';\\n\\n@NuRouter()\\nclass AppRouter extends Router {\\n  @NuRoute()\\n  ScreenRoute<void> firstScreen() => ScreenRoute(\\n    builder: (context) => FirstScreen()\\n  )\\n\\n  @NuRoute()\\n  ScreenRoute<void> secondScreen({int magicNumber}) => ScreenRoute(\\n    builder: (context) => SecondScreen(magicNumber: magicNumber)\\n  )\\n\\n  @override\\n  Map<RouteDef, ScreenRouteBuilder> get screensMap => _$screensMap;\\n}\\n```\\n\\nAs classes `Router` e `ScreenRoute` do exemplo acima v\u00EAm do Nuvigator. Este exemplo \u00E9 bem parecido com o segundo, em que criamos uma fun\u00E7\u00E3o para chamar a segunda tela. As diferen\u00E7as s\u00E3o que, neste caso, estas fun\u00E7\u00F5es s\u00E3o m\u00E9todos de uma classe nova `AppRouter` que criamos, e que elas est\u00E3o anotadas com `@NuRoute`. Estas anota\u00E7\u00F5es servem para indicar ao Nuvigator que cada fun\u00E7\u00E3o destas \u00E9 uma rota, e que ele deve gerar o c\u00F3digo necess\u00E1rio para que ela funcione. Al\u00E9m disso, h\u00E1 um getter `screensMap`, que vai ser usado pelo c\u00F3digo gerado, tamb\u00E9m. Eu aproveitei j\u00E1 e criei uma rota para a primeira tela.\\n\\nEnfim, adicionamos o Nuvigator no nosso app:\\n\\n```dart\\n// main.dart\\n\\nMaterialApp(\\n  builder: Nuvigator(\\n    router: AppRouter(), // O Router que criamos acima\\n    screenType: materialScreenType, // O tipo de rota padr\u00E3o\\n    initialRoute: AppRoutes.firstScreen,\\n  ), \\n);\\n```\\n\\nO widget `Nuvigator` recebe um `Router` e toma conta de lidar com a navega\u00E7\u00E3o a partir de agora. Uma outra classe \u00E9 gerada a partir do nosso `AppRouter` que \u00E9 a `AppRoutes`. Usamos ela no exemplo acima para especificar a rota inicial sem usar uma string diretamente no c\u00F3digo.\\n\\nEu falei algumas vezes sobre **gerar c\u00F3digo**. Isso funciona usando um pacote chamado [build_runner](). Ele adiciona um comando que podemos executar no projeto que vai escanear o c\u00F3digo fonte da nossa aplica\u00E7\u00E3o e gerar c\u00F3digo adicional de acordo com os pacotes que suportem essa fun\u00E7\u00E3o. \u00C9 para isso que as anota\u00E7\u00F5es servem. No topo do arquivo, colocamos uma diretriz `part`. Ela serve para dizer que h\u00E1 outro arquivo que estende a funcionalidade deste. Esse arquivo ainda n\u00E3o existe, mas vai ser gerado ao rodar o comando abaixo:\\n\\n```html\\n$ flutter pub run build_runner build --delete-conflicting-outputs\\n```\\n\\nNeste exemplo, o Nuvigator vai gerar fun\u00E7\u00F5es para abrir cada rota. Essas rotas, por padr\u00E3o, v\u00E3o abrir como um `push` (como nos primeiros exemplo), mas h\u00E1 suporte para definir m\u00FAltiplas maneiras de abrir uma rota e o Nuvigator gerar\u00E1 um m\u00E9todo para cada uma, como `pushReplacement` por exemplo. Nosso widget da primeira tela poderia buscar o Nuvigator no contexto para ter acesso a essas fun\u00E7\u00F5es, mas como ele j\u00E1 \u00E9 criado dentro da classe do nuvigator, podemos passar as fun\u00E7\u00F5es de navega\u00E7\u00E3o que o widget precisa como argumentos no seu construtor, e deixando o widget totalmente desacoplado da navega\u00E7\u00E3o.\\n\\n```dart\\n// app_router.dart \\n\\n@NuRoute()\\nScreenRoute<void> firstScreen() => ScreenRoute(\\n  builder: (context) => FirstScreen(\\n    // A fun\u00E7\u00E3o `toSecondScreen` \u00E9 gerada automaticamente usando o\\n    // tipo de rota padr\u00E3o, `push`\\n    toSecondScreen: toSecondScreen, \\n  )\\n)\\n```\\n```dart\\n// first_screen.dart\\n\\nclass FirstScreen extends StatelessWidget {\\n  FirstScreen({@required this.toSecondScreen});\\n\\n  final Function({int magicNumber}) toSecondScreen;\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    return Scaffold(\\n      appBar: AppBar(\\n        title: Text('First Screen'),\\n      ),\\n      body: Center(\\n        child: RaisedButton(\\n          child: Text('Open route'),\\n          onPressed: () => toSecondScreen(magicNumber: 42)\\n        ),\\n      ),\\n    );\\n  }\\n}\\n```\\n\\nPassando a fun\u00E7\u00E3o de navega\u00E7\u00E3o para o widget, ao inv\u00E9s de acess\u00E1-la diretamente nele, nos permite fazer testes unit\u00E1rios deste widget sem necessidade de navega\u00E7\u00E3o. Por exemplo, podemos passar uma implementa\u00E7\u00E3o que atualiza uma vari\u00E1vel local no teste e verificamos se, ao tocar no bot\u00E3o, essa vari\u00E1vel foi atualizada.\\n\\n\u00C9 poss\u00EDvel tamb\u00E9m acessar a segunda rota a partir de um deep link ao inv\u00E9s de passar a fun\u00E7\u00E3o para o widget. Para isso, precisamos nome\u00E1-la. Na implementa\u00E7\u00E3o de deep links do Nuvigator, \u00E9 poss\u00EDvel passar argumentos tanto como parte do path como via query string, sem configura\u00E7\u00E3o adicional na rota. O gerador de c\u00F3digo verifica o nome dos argumentos que a rota recebe e sabe tratar automaticamente, inclusive convertendo para o tipo final (`int` neste caso) para alguns tipos simples como `String`, `int`, `double`, `bool` e `DateTime` a partir da vers\u00E3o 0.6.0. \\n\\n```dart\\n// app_router.dart\\n\\n@NuRoute(deepLink: '/second') // Adicionamos o link para esta rota\\nScreenRoute<void> secondScreen({int magicNumber}) => ScreenRoute(\\n  builder: (context) => FirstScreen(magicNumber: magicNumber)\\n)\\n```\\n```dart\\n// first_screen.dart\\n\\nclass FirstScreen extends StatelessWidget {\\n  @override\\n  Widget build(BuildContext context) {\\n    return Scaffold(\\n      appBar: AppBar(\\n        title: Text('First Screen'),\\n      ),\\n      body: Center(\\n        child: RaisedButton(\\n          child: Text('Open route'),\\n          onPressed: () => \\n            Nuvigator.of(context).openDeepLink(Uri.parse('/second?magicNumber=42')),\\n        ),\\n      ),\\n    );\\n  }\\n}\\n```\\n\\nO uso de deep links pode gerar algum acomplamento se eles ficarem espalhados pela aplica\u00E7\u00E3o, mas \u00E9 bem \u00FAtil para, por exemplo, definir no back-end da aplica\u00E7\u00E3o qual rota abrir. O app recebe a string do deep link e pode abri-lo a partir de alguma intera\u00E7\u00E3o do usu\u00E1rio. Esse comportamento \u00E9 particularmente interessante em BFFs (back-ends for front-ends).\\n\\nEm algumas situa\u00E7\u00F5es, voc\u00EA pode querer navegar para um **fluxo** ao inv\u00E9s de uma tela. Um fluxo \u00E9 uma sequ\u00EAncia de telas que s\u00E3o agrupadas entre si e que, em algum momento (usualmente no fim do fluxo), voc\u00EA pode fechar todas elas de uma vez s\u00F3 e voltar para onde estava antes de chamar o fluxo. O Nuvigator d\u00E1 suporte a defini\u00E7\u00E3o de fluxos atrav\u00E9s de **Nuvigators aninhados**, que \u00E9 criar uma rota cujo widget \u00E9 outro Nuvigator. Este \u00E9 um trecho de c\u00F3digo do app de exemplo no projeto do Nuvigator:\\n\\n```dart\\n// sample_router.dart (do app de exemplo do Nuvigator)\\n\\n@NuRoute(deepLink: '/friendRequests')\\nScreenRoute<String> friendRequests() =>\\n    ScreenRoute(\\n      builder: Nuvigator(\\n        router: FriendRequestRouter(),\\n        initialRoute: FriendRequestRoutes.listRequests,\\n        screenType: materialScreenType,\\n      ),\\n    );\\n```\\n\\nNeste caso, ao inv\u00E9s de retornar um widget para a rota `/friendRequest`, estamos retornando um novo Nuvigator com um novo Router. O Nuvigator consegue lidar com esse aninhamento e, caso alguma tela dentro do fluxo chame a fun\u00E7\u00E3o de navega\u00E7\u00E3o `closeFlow()`, provida pelo Nuvigator, ela vai fechar todas as telas que fazem parte do mesmo fluxo, voltando para onde o usu\u00E1rio estava antes de chamar o fluxo pela primeira vez. Para a tela que vai chamar o fluxo, nada muda. Ela apenas vai abrir uma rota via fun\u00E7\u00E3o ou via deep link. A rota inclusive pode receber argumentos, se necess\u00E1rio.\\n\\n## O que eu ganho com isso?\\n\\nO Nuvigator foi feito para automatizar tarefas como a cria\u00E7\u00E3o de boilerplate para definir rotas. Originalmente, esse trabalho \u00E9 feito manualmente. Ele pode tamb\u00E9m n\u00E3o ser feito e o c\u00F3digo de roteamento ficar espalhado pela aplica\u00E7\u00E3o.\\n\\nPara apps pequenos com fluxos simples, os benef\u00EDcios podem n\u00E3o parecer relevantes junto a introdu\u00E7\u00E3o de gera\u00E7\u00E3o de c\u00F3digo, uma depend\u00EAncia nova e classes com anota\u00E7\u00F5es. Mas onde o Nuvigator brilha s\u00E3o em projetos maiores que t\u00EAm multiplos fluxos, com suporte a Nuvigators e Routers aninhados, hierarquia de deep links, classes de argumentos autogeradas, cria\u00E7\u00E3o de fun\u00E7\u00F5es para diferentes tipos de roteamento para uma mesma tela, e gerenciamento de alguns comportamentos mais complicados de navega\u00E7\u00E3o.\\n\\nIndependente de usar o Nuvigator ou n\u00E3o, uma sugest\u00E3o que deixo \u00E9 definir **algum padr\u00E3o** para navega\u00E7\u00E3o na aplica\u00E7\u00E3o. O Nuvigator, apesar de razoavelmente gen\u00E9rico, tem um pouco de opini\u00E3o sobre como estruturar essa navega\u00E7\u00E3o, e essa abordagem pode ser \u00FAtil ou n\u00E3o para o seu projeto.\\n\\n## Quero saber mais!\\n\\nNo reposit\u00F3rio do Nuvigator, h\u00E1 um [projeto de exemplo](https://github.com/nubank/nuvigator/tree/master/example) para demonstrar algumas dessas funcionalidades em uso. Inclusive, recentemente, eu subi um pull request para refatorar este projeto e facilitar o entendimento de cada demonstra\u00E7\u00E3o. Nele h\u00E1 tamb\u00E9m exemplos de usos mais complexos como um Bloc envelopando todas as telas de um Nuvigator aninhado usando o pacote [Provider](https://pub.dev/packages/provider) e a fun\u00E7\u00E3o `wrapper` do Nuvigator. Experimente executar o projeto num simulador e olhar o c\u00F3digo-fonte dele.\\n\\nO [Readme](https://github.com/nubank/nuvigator/blob/master/README.md) do Nuvigator explica cada um dos conceitos que ele introduz com exemplos, tamb\u00E9m. H\u00E1 uma sess\u00E3o espec\u00EDfica sobre gera\u00E7\u00E3o de c\u00F3digo que mostra quais classes e extens\u00F5es s\u00E3o geradas e para que cada uma serve. Se algo n\u00E3o estiver claro, pode abrir uma issue no GitHub (em ingl\u00EAs ou em portugu\u00EAs) que algu\u00E9m vai te ajudar!\\n\",\"readingTime\":12,\"summary\":\"Um dos aspectos mais importantes de um app \u00E9 a **navega\u00E7\u00E3o entre telas**. Na web, isso \u00E9 feito atrav\u00E9s de links (e, com a alta dos frameworks de front-end JavaScript, reimplementando esta navega\u00E7\u00E3o no cliente). Num app em Flutter, existem fun\u00E7\u00F5es de navega\u00E7\u00E3o para transicionar de uma tela para outra. Com elas \u00E9 poss\u00EDvel empilhar, substituir e remover telas criando o pr\u00F3prio widget da tela seguinte nestas fun\u00E7\u00F5es.\\n\\nO **Nuvigator** surgiu como uma abstra\u00E7\u00E3o em cima desse roteamento do Flutter para facilitar a declara\u00E7\u00E3o e reutiliza\u00E7\u00E3o destas rotas, o que \u00E9 bem \u00FAtil conforme o app cresce e tem mais partes que interagem. Trouxe uma introdu\u00E7\u00E3o a como ele funciona neste post!\\n\\n\"}},\"path\":\"navegacao-por-rotas-em-flutter-usando-o-nuvigator\",\"sharedData\":{},\"siteData\":{}}");</script><script defer="" type="text/javascript" src="/templates/vendors~__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.207edc50.js"></script><script defer="" type="text/javascript" src="/templates/__react_static_root__/src/containers/post~__react_static_root__/src/containers/postList.a04ea84b.js"></script><script defer="" type="text/javascript" src="/templates/__react_static_root__/src/containers/post.d8dd52db.js"></script><script defer="" type="text/javascript" src="/templates/vendors~main.272ae1d1.js"></script><script defer="" type="text/javascript" src="/main.f19d4c14.js"></script></body></html>